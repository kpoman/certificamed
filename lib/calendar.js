var a0_0xcacd=['new_consultation_msg','Consulta\x20Online','error\x20in\x20getconsultationStatus:','alert','event\x20to\x20insert:','error','user','safewebmed','uri','val','insert','summary','YYYYMMDDHHmm','list','info','split','new_consultation_date','then','creating\x20new\x20appointment\x20on\x20','startTime','extendedProperties','#modal_myguests','toast','...\x20listando\x20calendários\x20do\x20usuário\x20...','run','listing\x20user\x20calendars\x20...','consultation_length','acl','-beta','before\x20merge:','...\x20added\x20to\x20google\x20calendar','postNewConsultation','cost','setCalendars','withFailureHandler','criando\x20calendário\x20público\x20para\x20o\x20app\x20...','reader','all','primary','createdBy=','America/Sao_Paulo','format','empatizo','calendar','toISOString','conferenceData','getPublicCalendar','getConsultationStatus\x20result:','calendars','error\x20in\x20listing\x20calendars:','log','setCalendarEvents','Erro\x20ao\x20gravar\x20consulta\x20no\x20Calendário\x20!','DD/MM/YYYY\x20LT','shared','input[name=\x22public.calendar_id\x22]','found\x20calendar\x20with:','as\x20writer','result','new_consultation_val','add','...\x20atualizando\x20consultas\x20...','newBatch','return_period','...\x20error\x20adding\x20to\x20Empatizo.com:','new_consultation_time','listando\x20calendários\x20do\x20usuário\x20...','error\x20adding\x20to\x20google\x20calendar:','debug','certificamed','Consulta\x20agendada\x20com\x20sucesso\x20!','attendees','getConsultationStatus','client','error\x20listing\x20calendars:','updating\x20calendar\x20events','guest_id','hangoutsMeet','resultado\x20do\x20listing\x20de\x20calendarios\x20do\x20user:','rounded','events','calendarList','adding\x20','items'];(function(_0x4aad38,_0xcacd8){var _0x35f978=function(_0x11b39c){while(--_0x11b39c){_0x4aad38['push'](_0x4aad38['shift']());}};_0x35f978(++_0xcacd8);}(a0_0xcacd,0x19d));var a0_0x35f9=function(_0x4aad38,_0xcacd8){_0x4aad38=_0x4aad38-0x0;var _0x35f978=a0_0xcacd[_0x4aad38];return _0x35f978;};function getPublicCalendar(_0x516c2d){console[a0_0x35f9('0x39')]('checkdash'),pub=dashContext[a0_0x35f9('0x35')](),console[a0_0x35f9('0x39')](pub),!pub?(console[a0_0x35f9('0x39')]('checkgoogle'),showLoading(),M[a0_0x35f9('0x1d')]({'html':a0_0x35f9('0x49'),'classes':a0_0x35f9('0x2')}),gapi[a0_0x35f9('0x50')]['calendar'][a0_0x35f9('0x4')][a0_0x35f9('0x14')]({})[a0_0x35f9('0x18')](function(_0x528c67){cals=_0x528c67[a0_0x35f9('0x41')][a0_0x35f9('0x6')],pub=null;for(k in cals){console['log'](cals[k]),cals[k][a0_0x35f9('0x12')]==public_calendar_name&&(pub=cals[k]['id'],M[a0_0x35f9('0x1d')]({'html':'calendário\x20do\x20app\x20detectado\x20...\x20setando\x20!','classes':a0_0x35f9('0x2')}),calendar_id=pub,$(a0_0x35f9('0x3e'))['val'](calendar_id),name=cals[k][a0_0x35f9('0x12')],val=cals[k],dashContext['setCalendars']({'name':val}));}hideLoading(),!pub?(showLoading(),M[a0_0x35f9('0x1d')]({'html':a0_0x35f9('0x2a'),'classes':'rounded'}),gapi[a0_0x35f9('0x50')]['calendar'][a0_0x35f9('0x37')][a0_0x35f9('0x11')]({'summary':public_calendar_name,'timeZone':a0_0x35f9('0x2f')})[a0_0x35f9('0x18')](function(_0x365979){console['log']('created\x20this\x20calendar:'),console[a0_0x35f9('0x39')](_0x365979),id=_0x365979[a0_0x35f9('0x41')]['id'],$(a0_0x35f9('0x3e'))[a0_0x35f9('0x10')](id);var _0x1df261=gapi[a0_0x35f9('0x50')][a0_0x35f9('0x45')]();_0x1df261[a0_0x35f9('0x43')](gapi[a0_0x35f9('0x50')][a0_0x35f9('0x32')]['acl'][a0_0x35f9('0x11')]({'calendarId':id,'resource':{'role':a0_0x35f9('0x2b'),'scope':{'type':'default'}}}));var _0x68b991=calendar_manager[a0_0x35f9('0x16')](',');for(i in _0x68b991){w=_0x68b991[i],console['log'](a0_0x35f9('0x5')+w+a0_0x35f9('0x40')),_0x1df261[a0_0x35f9('0x43')](gapi['client']['calendar'][a0_0x35f9('0x22')][a0_0x35f9('0x11')]({'calendarId':id,'resource':{'role':'owner','scope':{'type':a0_0x35f9('0xd'),'value':w}}}));}_0x1df261['then'](function(_0xb2fcfd){console[a0_0x35f9('0x39')](_0xb2fcfd),name=cals[k][a0_0x35f9('0x12')],val=cals[k],dashContext[a0_0x35f9('0x28')]({'name':val}),hideLoading();},function(_0x1569d3){console['error'](_0x1569d3),hideLoading();});},function(_0x2336ab){hideLoading(),console['error'](a0_0x35f9('0x38')),console['error'](_0x2336ab);},this)):$(a0_0x35f9('0x3e'))[a0_0x35f9('0x10')](pub['id']);},function(_0xb3f6a9){console[a0_0x35f9('0xc')](a0_0x35f9('0x51')),console['error'](_0xb3f6a9);})):(console[a0_0x35f9('0x39')](a0_0x35f9('0x3f')),console[a0_0x35f9('0x39')](pub),$(a0_0x35f9('0x3e'))[a0_0x35f9('0x10')](pub['id']));}function createNewAppointment(_0x689bb4,_0x20c6e9){console[a0_0x35f9('0x15')](a0_0x35f9('0x19')+_0x689bb4+':'),console['info'](_0x20c6e9);'consultation_length'in _0x20c6e9?cl=_0x20c6e9[a0_0x35f9('0x21')]:cl=default_consultation_length;a0_0x35f9('0x46')in _0x20c6e9?returns=_0x20c6e9[a0_0x35f9('0x46')]:returns=0x0;var _0x597d27=moment(_0x20c6e9[a0_0x35f9('0x17')]+'\x20'+_0x20c6e9[a0_0x35f9('0x48')],'DD/MM/YYYY\x20LT'),_0xe2bcbd=moment(_0x20c6e9[a0_0x35f9('0x17')]+'\x20'+_0x20c6e9[a0_0x35f9('0x48')],a0_0x35f9('0x3c'))[a0_0x35f9('0x43')](cl,'m'),_0x206206=_0x20c6e9[a0_0x35f9('0x42')],_0x2b3064=_0x20c6e9[a0_0x35f9('0x7')],_0x2980e5=_0x20c6e9[a0_0x35f9('0x53')]+'_'+moment(_0x20c6e9[a0_0x35f9('0x17')])[a0_0x35f9('0x30')](a0_0x35f9('0x13')),_0x34647c={'summary':a0_0x35f9('0x8'),'description':_0x2b3064,'start':{'dateTime':_0x597d27[a0_0x35f9('0x30')](),'timeZone':a0_0x35f9('0x2f')},'end':{'dateTime':_0xe2bcbd[a0_0x35f9('0x30')](),'timeZone':'America/Sao_Paulo'},'attendees':[{'email':logged_user},{'email':_0x20c6e9['guest_id']}],'extendedProperties':{'shared':{'createdBy':customer+a0_0x35f9('0x23'),'cost':_0x206206,'returns':returns}},'conferenceData':{'createRequest':{'conferenceSolutionKey':{'type':a0_0x35f9('0x0')},'requestId':_0x2980e5}}},_0xa2771e={'calendarId':_0x689bb4,'sendUpdates':a0_0x35f9('0x2c'),'supportsAttachments':!![],'conferenceDataVersion':0x1,'resource':_0x34647c};console['log'](a0_0x35f9('0xb')),console['debug'](_0xa2771e),showLoading(),blockForm(a0_0x35f9('0x1c')),gapi[a0_0x35f9('0x50')][a0_0x35f9('0x32')][a0_0x35f9('0x3')][a0_0x35f9('0x11')](_0xa2771e)[a0_0x35f9('0x18')](function(_0x5d7149){console[a0_0x35f9('0x15')](a0_0x35f9('0x25')),console['debug'](_0x5d7149),writeEventRow(_0x5d7149[a0_0x35f9('0x41')]),event_id=_0x5d7149['result']['id'];try{meet_url=_0x5d7149[a0_0x35f9('0x41')][a0_0x35f9('0x34')]['entryPoints'][0x0][a0_0x35f9('0xf')];}catch(_0x3220e3){console['error'](_0x3220e3),meet_url=null;}_0x206206=_0x5d7149[a0_0x35f9('0x41')][a0_0x35f9('0x1b')][a0_0x35f9('0x3d')][a0_0x35f9('0x27')];var _0x29f2ac={'calendar_id':event_id,'meeting_url':meet_url,'pay_data':{'payment_value':_0x206206},'attendees':_0x5d7149[a0_0x35f9('0x41')][a0_0x35f9('0x4e')]};console[a0_0x35f9('0x39')](a0_0x35f9('0x24')),console[a0_0x35f9('0x39')](_0x29f2ac),_0x29f2ac=mergeDataObjects(_0x29f2ac,_0x34647c),console[a0_0x35f9('0x39')]('after\x20merge:'),console[a0_0x35f9('0x39')](_0x29f2ac),google['script'][a0_0x35f9('0x1f')]['withSuccessHandler'](function(_0x486590){hideLoading(),console[a0_0x35f9('0x39')]('postNewConsultation\x20result:'),console[a0_0x35f9('0x39')](_0x486590),resetForm(a0_0x35f9('0x1c')),closeModal(a0_0x35f9('0x1c')),$[a0_0x35f9('0xa')](a0_0x35f9('0x4d')),console['info']('...\x20added\x20to\x20Empatizo.com'),updateEventStatus(_0x486590),buildSvcFolder(_0x20c6e9[a0_0x35f9('0x53')],moment(_0x20c6e9[a0_0x35f9('0x17')])['format'](a0_0x35f9('0x13')));})[a0_0x35f9('0x29')](function(_0x21eafa){hideLoading(),$[a0_0x35f9('0xa')](a0_0x35f9('0x3b')),resetForm(a0_0x35f9('0x1c')),console[a0_0x35f9('0xc')](a0_0x35f9('0x47')),console[a0_0x35f9('0xc')](_0x21eafa);})[a0_0x35f9('0x26')](logged_user,dashType,_0x29f2ac);},function(_0x2d26b6){console[a0_0x35f9('0xc')](a0_0x35f9('0x4a')),console['error'](_0x2d26b6);},_0x34647c);}function listCalendars(){console[a0_0x35f9('0x39')](a0_0x35f9('0x20')),M[a0_0x35f9('0x1d')]({'html':a0_0x35f9('0x1e'),'classes':'rounded'}),gapi[a0_0x35f9('0x50')][a0_0x35f9('0x32')]['calendarList'][a0_0x35f9('0x14')]({})[a0_0x35f9('0x18')](function(_0x19d290){console[a0_0x35f9('0x39')](a0_0x35f9('0x1')),console[a0_0x35f9('0x39')](_0x19d290),items=_0x19d290[a0_0x35f9('0x41')]['items'];var _0x47e6ed={};for(k in items){_0x47e6ed[items[k][a0_0x35f9('0x12')]]=items[k];}dashContext['setCalendars'](_0x47e6ed);},function(_0x2ee01d){console[a0_0x35f9('0xc')](a0_0x35f9('0x38')),console[a0_0x35f9('0xc')](_0x2ee01d);},this);}function startUpdatingCalendar(){updateCalendar(!![]),setInterval(function(){updateCalendar(![]);},0x3c*0x3e8);}function updateCalendar(_0x49a90b){console['log'](a0_0x35f9('0x52'));_0x49a90b&&(M[a0_0x35f9('0x1d')]({'html':a0_0x35f9('0x44'),'classes':a0_0x35f9('0x2')}),showLoading());var _0x3678f9=new Date()[a0_0x35f9('0x33')]();function _0x189391(_0x54cd46){return gapi['client'][a0_0x35f9('0x32')][a0_0x35f9('0x3')]['list']({'calendarId':a0_0x35f9('0x2d'),'showDeleted':![],'singleEvents':!![],'maxResults':0x64,'orderBy':a0_0x35f9('0x1a'),'sharedExtendedProperty':a0_0x35f9('0x2e')+_0x54cd46+a0_0x35f9('0x23')});}var _0x1ba31d=gapi[a0_0x35f9('0x50')][a0_0x35f9('0x45')]();_0x1ba31d[a0_0x35f9('0x43')](_0x189391(a0_0x35f9('0x31')),{'id':a0_0x35f9('0x31')}),_0x1ba31d[a0_0x35f9('0x43')](_0x189391(a0_0x35f9('0xe')),{'id':a0_0x35f9('0xe')}),_0x1ba31d['add'](_0x189391(a0_0x35f9('0x4c')),{'id':a0_0x35f9('0x4c')}),_0x1ba31d[a0_0x35f9('0x18')](function(_0x2bb8c2){for(r in _0x2bb8c2[a0_0x35f9('0x41')]){var _0xb00638=_0x2bb8c2[a0_0x35f9('0x41')][r][a0_0x35f9('0x41')][a0_0x35f9('0x6')];dashContext[a0_0x35f9('0x3a')](_0xb00638),updateEventsSchedule(_0xb00638);}console['log']('updating\x20calendar\x20events\x20extra\x20data'),google['script'][a0_0x35f9('0x1f')]['withSuccessHandler'](function(_0x3dfefe){hideLoading(),console[a0_0x35f9('0x4b')](a0_0x35f9('0x36')),console[a0_0x35f9('0x4b')](_0x3dfefe),updateEventsScheduleStatus(_0x3dfefe);})['withFailureHandler'](failedScheduleStatus)[a0_0x35f9('0x4f')](logged_user,dashType);},function(_0x2b83fc){console[a0_0x35f9('0xc')](a0_0x35f9('0x9')),console[a0_0x35f9('0xc')](_0x2b83fc);});}