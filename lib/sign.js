const a0_0x21f2=['then','Widget','Annot','MessageDigest','digest','PDFString','Adobe.PPKLite','padEnd','set','register','added\x20watermark\x20to\x20pdf:','stringify','obj','\x0aPlataforma\x20','indexOf','cryptojs','padStart','saveAsBase64','push','fromDate','replace','data','POST','toString','AcroForm','ETSI.CAdES.detached','suporte@empatizo.com','btoa','copyBytesInto','-----END\x20PKCS7-----','signatures','CharCodes','patching\x20pdf-lib.js\x20for\x20empatizo\x20P4d3S\x20crap','Annots','getWidth','crypto','RightSquareBracket','bearer','https://www.certificamed.com','toUpperCase','node','Signature1','ajax','get','provider','size','PDFArrayCustom','log','one','array','getHeight','error','PDFName','Signature\x20request\x20ID\x201','PDFHexString','context','getPage','clone','Bearer\x20','application/json','obtained','solutiSignHash:','Sig','charCodeAt','Space','documento\x20assinado\x20eletrÃ´nicamente','PDFDocument','getPdfHash:','withContext','sizeInBytes','debug','ref','load','ready','Documento\x20solicitado\x20dentro\x20da\x20plataforma\x20com\x20assinatura\x20digital','addSigPlaceholder:','catalog','identification','https://pscsafeweb.safewebpss.com.br/Service/Microservice/OAuth/api/v0/oauth/signature-icp','https://api.birdid.com.br/v0/oauth/signature','raw_signature','atob','PDFArray','length'];(function(_0x23b1c7,_0x21f2da){const _0x6bd42e=function(_0x25f85d){while(--_0x25f85d){_0x23b1c7['push'](_0x23b1c7['shift']());}};_0x6bd42e(++_0x21f2da);}(a0_0x21f2,0xfa));const a0_0x6bd4=function(_0x23b1c7,_0x21f2da){_0x23b1c7=_0x23b1c7-0x0;let _0x6bd42e=a0_0x21f2[_0x23b1c7];return _0x6bd42e;};function addSignedPdfIndicator(_0x2677fe,_0x44befa){var _0x43f441=window[a0_0x6bd4('0x1d')](_0x2677fe),_0x164195='https://assinaturadigital.iti.gov.br/';return new Promise(function(_0x1d61c2,_0x5c3bcf){PDFLib[a0_0x6bd4('0x44')][a0_0x6bd4('0x4a')](_0x43f441)[a0_0x6bd4('0x2')](function(_0x1fde4d){let _0x529c9d=_0x1fde4d[a0_0x6bd4('0x3a')](0x0),_0x77ed30=_0x529c9d[a0_0x6bd4('0x34')](),_0x577734=_0x529c9d[a0_0x6bd4('0x24')]();_0x529c9d['drawText'](a0_0x6bd4('0x43'),{'x':0x37,'y':0x25,'width':0x50,'height':0x14,'size':0x3,'opacity':0.8,'lineHeight':0x4}),_0x529c9d['drawText'](_0x44befa,{'x':0x36,'y':0x22,'width':0x50,'height':0x14,'size':0x2,'opacity':0.1,'lineHeight':0x2}),_0x1fde4d[a0_0x6bd4('0x13')]()[a0_0x6bd4('0x2')](function(_0x594fc6){console[a0_0x6bd4('0x31')](a0_0x6bd4('0xc')),console['log'](_0x594fc6['length'],'bytes'),_0x1d61c2(window[a0_0x6bd4('0x53')](_0x594fc6));},function(_0x28ce21){console['error']('error\x20in\x20saveasbase64:'),console[a0_0x6bd4('0x35')](_0x28ce21),_0x5c3bcf(_0x28ce21);});},function(_0x329c71){_0x5c3bcf(_0x329c71);});});}function safewebSignPdf(_0x122d9a){return new Promise(function(_0x4f5622,_0x16afbf){var _0xc221f9='';_0xc221f9+=a0_0x6bd4('0xf')+friendly_name,keys=[a0_0x6bd4('0x2e'),a0_0x6bd4('0x4f'),a0_0x6bd4('0x3e')];for(k in keys){_0xc221f9+='\x0a'+keys[k]+':\x20'+certificate_session[keys[k]];}addSignedPdfIndicator(_0x122d9a,_0xc221f9)['then'](function(_0x4849b8){bearer=certificate_session[a0_0x6bd4('0x27')],headers={'Authorization':a0_0x6bd4('0x3c')+bearer},data_base64=window[a0_0x6bd4('0x1d')](_0x4849b8),$['ajax']({'url':a0_0x6bd4('0x50'),'headers':headers,'type':'POST','contentType':a0_0x6bd4('0x3d'),'data':JSON['stringify']({'file':{'id':a0_0x6bd4('0x37'),'alias':'Arquivo\x20PDF','content':data_base64,'signature_type':0x2,'signature_policy':0x0}}),'success':function(_0x247c10){console[a0_0x6bd4('0x31')]('ok\x20signing\x20on\x20safeweb\x20!'),_0x4f5622(_0x247c10);},'error':function(_0x1bed9c){console[a0_0x6bd4('0x31')]('trouble\x20signing\x20in\x20safeweb:'),console[a0_0x6bd4('0x31')](_0x1bed9c),_0x16afbf(_0x1bed9c);}});},function(_0x2cfca5){_0x16afbf(_0x2cfca5);});});}function addSigPlaceholder(_0x2fbb1a){pages=_0x2fbb1a['getPages']();const _0x2c5360=PDFLib['PDFArrayCustom'][a0_0x6bd4('0x46')](_0x2fbb1a['context']);_0x2c5360[a0_0x6bd4('0x14')](brp0),_0x2c5360['push'](brp1),_0x2c5360[a0_0x6bd4('0x14')](brp2),_0x2c5360[a0_0x6bd4('0x14')](brp3);let _0xf2e18f=_0x2fbb1a[a0_0x6bd4('0x39')][a0_0x6bd4('0xe')]({'Type':a0_0x6bd4('0x40'),'Filter':a0_0x6bd4('0x8'),'SubFilter':a0_0x6bd4('0x1b'),'ByteRange':_0x2c5360,'Contents':pdf_sigdata,'ContactInfo':PDFLib['PDFString']['of'](a0_0x6bd4('0x1c')),'Location':PDFLib[a0_0x6bd4('0x7')]['of'](a0_0x6bd4('0x28')),'Reason':PDFLib[a0_0x6bd4('0x7')]['of'](a0_0x6bd4('0x4c')),'M':PDFLib[a0_0x6bd4('0x7')][a0_0x6bd4('0x15')](new Date())}),_0x4e6137=_0x2fbb1a[a0_0x6bd4('0x39')][a0_0x6bd4('0xb')](_0xf2e18f),_0x266e0f=_0x2fbb1a[a0_0x6bd4('0x39')][a0_0x6bd4('0xe')]({'Type':a0_0x6bd4('0x4'),'Subtype':a0_0x6bd4('0x3'),'FT':a0_0x6bd4('0x40'),'Rect':[0x0,0x0,0x0,0x0],'V':_0x4e6137,'T':PDFLib[a0_0x6bd4('0x7')]['of'](a0_0x6bd4('0x2b')),'F':0x4,'P':pages[0x0][a0_0x6bd4('0x49')]}),_0x109902=_0x2fbb1a['context'][a0_0x6bd4('0xb')](_0x266e0f);return pages[0x0][a0_0x6bd4('0x2a')][a0_0x6bd4('0xa')](PDFLib[a0_0x6bd4('0x36')]['of'](a0_0x6bd4('0x23')),_0x2fbb1a[a0_0x6bd4('0x39')][a0_0x6bd4('0xe')]([_0x109902])),_0x2fbb1a[a0_0x6bd4('0x4e')][a0_0x6bd4('0xa')](PDFLib[a0_0x6bd4('0x36')]['of'](a0_0x6bd4('0x1a')),_0x2fbb1a[a0_0x6bd4('0x39')][a0_0x6bd4('0xe')]({'SigFlags':0x3,'Fields':[_0x109902]})),_0x2fbb1a;}function getPdfHash(_0x329f9b){return new Promise(function(_0x5a0ff8,_0x28054a){let _0x4b1be2=window[a0_0x6bd4('0x53')](_0x329f9b),_0x2d8094=_0x4b1be2[a0_0x6bd4('0x1')],_0x1c037c=_0x4b1be2[a0_0x6bd4('0x10')](pdf_sigdata),_0x1e36ac=_0x1c037c+String(pdf_sigdata)[a0_0x6bd4('0x1')],_0x19ba16=String(0x0)[a0_0x6bd4('0x12')](String(brp0)[a0_0x6bd4('0x1')],'0'),_0x345366=String(_0x1c037c)[a0_0x6bd4('0x12')](String(brp1)['length'],'0'),_0x8f545b=String(_0x1e36ac)[a0_0x6bd4('0x12')](String(brp2)[a0_0x6bd4('0x1')],'0'),_0x49c674=String(_0x2d8094-_0x1e36ac)['padStart'](String(brp3)[a0_0x6bd4('0x1')],'0');_0x4b1be2=_0x4b1be2[a0_0x6bd4('0x16')](brp0,_0x19ba16),_0x4b1be2=_0x4b1be2[a0_0x6bd4('0x16')](brp1,_0x345366),_0x4b1be2=_0x4b1be2[a0_0x6bd4('0x16')](brp2,_0x8f545b),_0x4b1be2=_0x4b1be2['replace'](brp3,_0x49c674),pdf_sigdata_inner=String(pdf_sigdata);let _0x47e71e=_0x4b1be2[a0_0x6bd4('0x16')](pdf_sigdata_inner,''),_0x332334=new KJUR[(a0_0x6bd4('0x25'))][(a0_0x6bd4('0x5'))]({'alg':'sha256','prov':a0_0x6bd4('0x11')}),_0x3f8546=_0x332334['digestHex'](b64nltohex(window[a0_0x6bd4('0x1d')](_0x47e71e)));_0x5a0ff8({'data':_0x4b1be2,'digest':_0x3f8546,'signable_data':_0x47e71e});});}function solutiSignHash(_0x9aac00,_0x42447b){return new Promise(function(_0x520bb7,_0x1f5cad){bearer=certificate_session[a0_0x6bd4('0x27')],!_0x42447b&&(_0x42447b='CAdES'),url=a0_0x6bd4('0x51'),headers={'Authorization':a0_0x6bd4('0x3c')+bearer,'Content-Type':a0_0x6bd4('0x3d'),'Accept':'application/json'},hashes=[{'id':0x1,'alias':a0_0x6bd4('0x32'),'hash':_0x9aac00,'signature_format':_0x42447b}],data={'hashes':hashes,'include_chain':!![]},$[a0_0x6bd4('0x2c')]({'url':url,'type':a0_0x6bd4('0x18'),'crossDomain':!![],'headers':headers,'data':JSON[a0_0x6bd4('0xd')](data),'success':function(_0x39068e){_0x520bb7(_0x39068e);},'error':function(_0x918c56){_0x1f5cad(_0x918c56);}});});}function solutiSignPdf(_0x1f0a7f){return new Promise(function(_0x4e71e3,_0x4e8999){pdf_data=window[a0_0x6bd4('0x1d')](_0x1f0a7f)['replace']('\x0a',''),PDFLib[a0_0x6bd4('0x44')]['load'](pdf_data)[a0_0x6bd4('0x2')](_0x20db28=>addSigPlaceholder(_0x20db28))[a0_0x6bd4('0x2')](_0x3d565f=>{console[a0_0x6bd4('0x31')](a0_0x6bd4('0x4d'),_0x3d565f),_0x3d565f[a0_0x6bd4('0x13')]({'useObjectStreams':![]})[a0_0x6bd4('0x2')](function(_0x23840c){getPdfHash(_0x23840c)['then'](function(_0x16d599){console[a0_0x6bd4('0x48')](a0_0x6bd4('0x45'),_0x16d599),debug_digest=_0x16d599[a0_0x6bd4('0x6')],solutiSignHash(debug_digest)[a0_0x6bd4('0x2')](_0x2bf1bd=>{console[a0_0x6bd4('0x48')](a0_0x6bd4('0x3f'),_0x2bf1bd);let _0x392d77=_0x2bf1bd[a0_0x6bd4('0x20')][0x0][a0_0x6bd4('0x52')][a0_0x6bd4('0x16')]('-----BEGIN\x20PKCS7-----','')['replace'](a0_0x6bd4('0x1f'),''),_0x3de324=window[a0_0x6bd4('0x53')](_0x392d77),_0x43ab34='';for(let _0x2a67d9=0x0;_0x2a67d9<_0x3de324[a0_0x6bd4('0x1')];_0x2a67d9++){const _0x2a8b87=_0x3de324[a0_0x6bd4('0x41')](_0x2a67d9)[a0_0x6bd4('0x19')](0x10);_0x43ab34+=_0x2a8b87[a0_0x6bd4('0x1')]===0x2?_0x2a8b87:'0'+_0x2a8b87;}_0x43ab34=_0x43ab34[a0_0x6bd4('0x29')]()[a0_0x6bd4('0x9')](signature_length,'0'),_0x23840c=_0x16d599[a0_0x6bd4('0x17')][a0_0x6bd4('0x16')](pdf_sigdata,'<'+_0x43ab34+'>'),_0x4e71e3(_0x23840c);},_0x3bdbaa=>_0x4e8999(_0x3bdbaa));});});});});}$(document)[a0_0x6bd4('0x4b')](function(){console[a0_0x6bd4('0x31')](a0_0x6bd4('0x22'));class _0x33f88e extends PDFLib[a0_0x6bd4('0x0')]{static[a0_0x6bd4('0x46')](_0x2187ea){return new _0x33f88e(_0x2187ea);}[a0_0x6bd4('0x3b')](_0x441c14){const _0x59ad60=_0x33f88e[a0_0x6bd4('0x46')](_0x441c14||this[a0_0x6bd4('0x39')]);for(let _0x342dd6=0x0,_0xe0d2db=this[a0_0x6bd4('0x2f')]();_0x342dd6<_0xe0d2db;_0x342dd6++){_0x59ad60['push'](this[a0_0x6bd4('0x33')][_0x342dd6]);}return _0x59ad60;}[a0_0x6bd4('0x19')](){let _0x1f11ad='[';for(let _0x4fedf5=0x0,_0x372af6=this[a0_0x6bd4('0x2f')]();_0x4fedf5<_0x372af6;_0x4fedf5++){_0x1f11ad+=this[a0_0x6bd4('0x2d')](_0x4fedf5)[a0_0x6bd4('0x19')]();if(_0x4fedf5<_0x372af6-0x1)_0x1f11ad+='\x20';}return _0x1f11ad+=']',_0x1f11ad;}[a0_0x6bd4('0x47')](){let _0xc94296=0x2;for(let _0x223a88=0x0,_0x5c4fc5=this[a0_0x6bd4('0x2f')]();_0x223a88<_0x5c4fc5;_0x223a88++){_0xc94296+=this[a0_0x6bd4('0x2d')](_0x223a88)['sizeInBytes']();if(_0x223a88<_0x5c4fc5-0x1)_0xc94296+=0x1;}return _0xc94296;}[a0_0x6bd4('0x1e')](_0x3f0d94,_0x39a455){const _0x34095d=_0x39a455;_0x3f0d94[_0x39a455++]=PDFLib[a0_0x6bd4('0x21')]['LeftSquareBracket'];for(let _0x3f90eb=0x0,_0x3381b1=this[a0_0x6bd4('0x2f')]();_0x3f90eb<_0x3381b1;_0x3f90eb++){_0x39a455+=this[a0_0x6bd4('0x2d')](_0x3f90eb)[a0_0x6bd4('0x1e')](_0x3f0d94,_0x39a455);if(_0x3f90eb<_0x3381b1-0x1)_0x3f0d94[_0x39a455++]=PDFLib[a0_0x6bd4('0x21')][a0_0x6bd4('0x42')];}return _0x3f0d94[_0x39a455++]=PDFLib[a0_0x6bd4('0x21')][a0_0x6bd4('0x26')],_0x39a455-_0x34095d;}}PDFLib[a0_0x6bd4('0x30')]=_0x33f88e,brp0=PDFLib[a0_0x6bd4('0x36')]['of'](byterange_placeholder+'0'),brp1=PDFLib[a0_0x6bd4('0x36')]['of'](byterange_placeholder+'1'),brp2=PDFLib[a0_0x6bd4('0x36')]['of'](byterange_placeholder+'2'),brp3=PDFLib[a0_0x6bd4('0x36')]['of'](byterange_placeholder+'3'),pdf_sigdata=PDFLib[a0_0x6bd4('0x38')]['of']('A'['repeat'](signature_length));});