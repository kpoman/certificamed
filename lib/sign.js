const a0_0x9d6c=['digestHex','Arquivo\x20PDF','then','load','identification','patching\x20pdf-lib.js\x20for\x20empatizo\x20P4d3S\x20crap','error\x20in\x20saveasbase64:','ajax','Sig','added\x20watermark\x20to\x20pdf:','\x0aPlataforma\x20','push','replace','-----END\x20PKCS7-----','PDFArrayCustom','cryptojs','btoa','saveAsBase64','set','obj','-----BEGIN\x20PKCS7-----','PDFHexString','atob','application/json','Bearer\x20','drawText','Adobe.PPKLite','length','repeat','addSigPlaceholder:','get','raw_signature','array','catalog','Annot','Widget','context','PDFName','node','one','RightSquareBracket','Annots','fromDate','toString','ETSI.CAdES.detached','getPdfHash:','Signature\x20request\x20ID\x201','MessageDigest','trouble\x20signing\x20in\x20safeweb:','log','debug','getHeight','PDFString','toUpperCase','indexOf','AcroForm','getWidth','crypto','data','getPages','copyBytesInto','register','padStart','size','stringify','https://api.birdid.com.br/v0/oauth/signature','LeftSquareBracket','https://pscsafeweb.safewebpss.com.br/Service/Microservice/OAuth/api/v0/oauth/signature-icp','withContext','padEnd','ok\x20signing\x20on\x20safeweb\x20!','error','bytes','solutiSignHash:','sha256','bearer','https://assinaturadigital.iti.gov.br/','PDFDocument','clone','sizeInBytes','POST','obtained','documento\x20assinado\x20eletrÃ´nicamente'];(function(_0x2bb386,_0x9d6c4a){const _0x40e918=function(_0x4974f3){while(--_0x4974f3){_0x2bb386['push'](_0x2bb386['shift']());}};_0x40e918(++_0x9d6c4a);}(a0_0x9d6c,0x11b));const a0_0x40e9=function(_0x2bb386,_0x9d6c4a){_0x2bb386=_0x2bb386-0x0;let _0x40e918=a0_0x9d6c[_0x2bb386];return _0x40e918;};function addSignedPdfIndicator(_0x426d1d,_0x5f2a75){var _0x3002c3=window[a0_0x40e9('0x41')](_0x426d1d),_0x26e00e=a0_0x40e9('0x2a');return new Promise(function(_0x569a1e,_0x5b4f29){PDFLib[a0_0x40e9('0x2b')][a0_0x40e9('0x34')](_0x3002c3)[a0_0x40e9('0x33')](function(_0x44fb53){let _0xd852ad=_0x44fb53['getPage'](0x0),_0x4a674e=_0xd852ad[a0_0x40e9('0x11')](),_0x1f39db=_0xd852ad[a0_0x40e9('0x16')]();_0xd852ad[a0_0x40e9('0x4a')](a0_0x40e9('0x30'),{'x':0x37,'y':0x25,'width':0x50,'height':0x14,'size':0x3,'opacity':0.8,'lineHeight':0x4}),_0xd852ad[a0_0x40e9('0x4a')](_0x5f2a75,{'x':0x36,'y':0x22,'width':0x50,'height':0x14,'size':0x2,'opacity':0.1,'lineHeight':0x2}),_0x44fb53[a0_0x40e9('0x42')]()[a0_0x40e9('0x33')](function(_0x142a25){console['log'](a0_0x40e9('0x3a')),console[a0_0x40e9('0xf')](_0x142a25[a0_0x40e9('0x4c')],a0_0x40e9('0x26')),_0x569a1e(window[a0_0x40e9('0x47')](_0x142a25));},function(_0x304823){console['error'](a0_0x40e9('0x37')),console[a0_0x40e9('0x25')](_0x304823),_0x5b4f29(_0x304823);});},function(_0x510331){_0x5b4f29(_0x510331);});});}function safewebSignPdf(_0x88f576){return new Promise(function(_0x3a728f,_0x33c314){var _0x5857e2='';_0x5857e2+=a0_0x40e9('0x3b')+friendly_name,keys=['provider',a0_0x40e9('0x35'),a0_0x40e9('0x2f')];for(k in keys){_0x5857e2+='\x0a'+keys[k]+':\x20'+certificate_session[keys[k]];}addSignedPdfIndicator(_0x88f576,_0x5857e2)[a0_0x40e9('0x33')](function(_0x15de83){bearer=certificate_session[a0_0x40e9('0x29')],headers={'Authorization':a0_0x40e9('0x49')+bearer},data_base64=window[a0_0x40e9('0x41')](_0x15de83),$[a0_0x40e9('0x38')]({'url':a0_0x40e9('0x21'),'headers':headers,'type':'POST','contentType':a0_0x40e9('0x48'),'data':JSON[a0_0x40e9('0x1e')]({'file':{'id':a0_0x40e9('0xc'),'alias':a0_0x40e9('0x32'),'content':data_base64,'signature_type':0x2,'signature_policy':0x0}}),'success':function(_0x141b64){console[a0_0x40e9('0xf')](a0_0x40e9('0x24')),_0x3a728f(_0x141b64);},'error':function(_0x305a4a){console[a0_0x40e9('0xf')](a0_0x40e9('0xe')),console[a0_0x40e9('0xf')](_0x305a4a),_0x33c314(_0x305a4a);}});},function(_0x4cc20c){_0x33c314(_0x4cc20c);});});}function addSigPlaceholder(_0x55509d){pages=_0x55509d[a0_0x40e9('0x19')]();const _0x4bd68c=PDFLib[a0_0x40e9('0x3f')][a0_0x40e9('0x22')](_0x55509d[a0_0x40e9('0x2')]);_0x4bd68c[a0_0x40e9('0x3c')](brp0),_0x4bd68c[a0_0x40e9('0x3c')](brp1),_0x4bd68c[a0_0x40e9('0x3c')](brp2),_0x4bd68c[a0_0x40e9('0x3c')](brp3);let _0x40e406=_0x55509d['context']['obj']({'Type':'Sig','Filter':a0_0x40e9('0x4b'),'SubFilter':a0_0x40e9('0xa'),'ByteRange':_0x4bd68c,'Contents':pdf_sigdata,'ContactInfo':PDFLib[a0_0x40e9('0x12')]['of']('suporte@empatizo.com'),'Location':PDFLib[a0_0x40e9('0x12')]['of']('https://www.certificamed.com'),'Reason':PDFLib[a0_0x40e9('0x12')]['of']('Documento\x20solicitado\x20dentro\x20da\x20plataforma\x20com\x20assinatura\x20digital'),'M':PDFLib[a0_0x40e9('0x12')][a0_0x40e9('0x8')](new Date())}),_0x34cbb5=_0x55509d[a0_0x40e9('0x2')][a0_0x40e9('0x1b')](_0x40e406),_0x5c8d73=_0x55509d[a0_0x40e9('0x2')][a0_0x40e9('0x44')]({'Type':a0_0x40e9('0x0'),'Subtype':a0_0x40e9('0x1'),'FT':a0_0x40e9('0x39'),'Rect':[0x0,0x0,0x0,0x0],'V':_0x34cbb5,'T':PDFLib['PDFString']['of']('Signature1'),'F':0x4,'P':pages[0x0]['ref']}),_0x587f70=_0x55509d[a0_0x40e9('0x2')][a0_0x40e9('0x1b')](_0x5c8d73);return pages[0x0][a0_0x40e9('0x4')][a0_0x40e9('0x43')](PDFLib[a0_0x40e9('0x3')]['of'](a0_0x40e9('0x7')),_0x55509d['context'][a0_0x40e9('0x44')]([_0x587f70])),_0x55509d[a0_0x40e9('0x52')][a0_0x40e9('0x43')](PDFLib[a0_0x40e9('0x3')]['of'](a0_0x40e9('0x15')),_0x55509d[a0_0x40e9('0x2')][a0_0x40e9('0x44')]({'SigFlags':0x3,'Fields':[_0x587f70]})),_0x55509d;}function getPdfHash(_0x235afe){return new Promise(function(_0x3ce21a,_0x2b1d23){let _0x121700=window[a0_0x40e9('0x47')](_0x235afe),_0x1a19f5=_0x121700['length'],_0x6d6488=_0x121700[a0_0x40e9('0x14')](pdf_sigdata),_0xc98df=_0x6d6488+String(pdf_sigdata)[a0_0x40e9('0x4c')],_0x386a60=String(0x0)[a0_0x40e9('0x1c')](String(brp0)[a0_0x40e9('0x4c')],'0'),_0x593721=String(_0x6d6488)[a0_0x40e9('0x1c')](String(brp1)['length'],'0'),_0x1b99e7=String(_0xc98df)[a0_0x40e9('0x1c')](String(brp2)[a0_0x40e9('0x4c')],'0'),_0x1eedd6=String(_0x1a19f5-_0xc98df)['padStart'](String(brp3)[a0_0x40e9('0x4c')],'0');_0x121700=_0x121700[a0_0x40e9('0x3d')](brp0,_0x386a60),_0x121700=_0x121700[a0_0x40e9('0x3d')](brp1,_0x593721),_0x121700=_0x121700[a0_0x40e9('0x3d')](brp2,_0x1b99e7),_0x121700=_0x121700[a0_0x40e9('0x3d')](brp3,_0x1eedd6),pdf_sigdata_inner=String(pdf_sigdata);let _0x599026=_0x121700[a0_0x40e9('0x3d')](pdf_sigdata_inner,''),_0x12a080=new KJUR[(a0_0x40e9('0x17'))][(a0_0x40e9('0xd'))]({'alg':a0_0x40e9('0x28'),'prov':a0_0x40e9('0x40')}),_0x138265=_0x12a080[a0_0x40e9('0x31')](b64nltohex(window[a0_0x40e9('0x41')](_0x599026)));_0x3ce21a({'data':_0x121700,'digest':_0x138265,'signable_data':_0x599026});});}function solutiSignHash(_0x391619,_0xeb3ccc){return new Promise(function(_0x163044,_0x1396f1){bearer=certificate_session['bearer'],!_0xeb3ccc&&(_0xeb3ccc='CAdES'),url=a0_0x40e9('0x1f'),headers={'Authorization':a0_0x40e9('0x49')+bearer,'Content-Type':a0_0x40e9('0x48'),'Accept':a0_0x40e9('0x48')},hashes=[{'id':0x1,'alias':a0_0x40e9('0x5'),'hash':_0x391619,'signature_format':_0xeb3ccc}],data={'hashes':hashes,'include_chain':!![]},$[a0_0x40e9('0x38')]({'url':url,'type':a0_0x40e9('0x2e'),'crossDomain':!![],'headers':headers,'data':JSON[a0_0x40e9('0x1e')](data),'success':function(_0x409e8f){_0x163044(_0x409e8f);},'error':function(_0x3597c){_0x1396f1(_0x3597c);}});});}function solutiSignPdf(_0x16e428){return new Promise(function(_0x10d1bd,_0x4d54a6){pdf_data=window[a0_0x40e9('0x41')](_0x16e428)['replace']('\x0a',''),PDFLib[a0_0x40e9('0x2b')][a0_0x40e9('0x34')](pdf_data)['then'](_0x410e34=>addSigPlaceholder(_0x410e34))[a0_0x40e9('0x33')](_0x39a86f=>{console['log'](a0_0x40e9('0x4e'),_0x39a86f),_0x39a86f[a0_0x40e9('0x42')]({'useObjectStreams':![]})['then'](function(_0x2b1cd0){getPdfHash(_0x2b1cd0)[a0_0x40e9('0x33')](function(_0x364b77){console['debug'](a0_0x40e9('0xb'),_0x364b77),debug_digest=_0x364b77['digest'],solutiSignHash(debug_digest)[a0_0x40e9('0x33')](_0x4844e8=>{console[a0_0x40e9('0x10')](a0_0x40e9('0x27'),_0x4844e8);let _0x4e90c2=_0x4844e8['signatures'][0x0][a0_0x40e9('0x50')][a0_0x40e9('0x3d')](a0_0x40e9('0x45'),'')[a0_0x40e9('0x3d')](a0_0x40e9('0x3e'),''),_0x3b3eaa=window[a0_0x40e9('0x47')](_0x4e90c2),_0x28804b='';for(let _0x518769=0x0;_0x518769<_0x3b3eaa['length'];_0x518769++){const _0x4fc361=_0x3b3eaa['charCodeAt'](_0x518769)['toString'](0x10);_0x28804b+=_0x4fc361[a0_0x40e9('0x4c')]===0x2?_0x4fc361:'0'+_0x4fc361;}_0x28804b=_0x28804b[a0_0x40e9('0x13')]()[a0_0x40e9('0x23')](signature_length,'0'),_0x2b1cd0=_0x364b77[a0_0x40e9('0x18')][a0_0x40e9('0x3d')](pdf_sigdata,'<'+_0x28804b+'>'),_0x10d1bd(_0x2b1cd0);},_0x53f4dc=>_0x4d54a6(_0x53f4dc));});});});});}$(document)['ready'](function(){console[a0_0x40e9('0xf')](a0_0x40e9('0x36'));class _0x28e2eb extends PDFLib['PDFArray']{static['withContext'](_0x4e0cb1){return new _0x28e2eb(_0x4e0cb1);}[a0_0x40e9('0x2c')](_0x246755){const _0x1eba02=_0x28e2eb[a0_0x40e9('0x22')](_0x246755||this[a0_0x40e9('0x2')]);for(let _0x35d5d7=0x0,_0x97c1e8=this[a0_0x40e9('0x1d')]();_0x35d5d7<_0x97c1e8;_0x35d5d7++){_0x1eba02[a0_0x40e9('0x3c')](this[a0_0x40e9('0x51')][_0x35d5d7]);}return _0x1eba02;}[a0_0x40e9('0x9')](){let _0x42df71='[';for(let _0x217bef=0x0,_0x4b5b65=this['size']();_0x217bef<_0x4b5b65;_0x217bef++){_0x42df71+=this[a0_0x40e9('0x4f')](_0x217bef)[a0_0x40e9('0x9')]();if(_0x217bef<_0x4b5b65-0x1)_0x42df71+='\x20';}return _0x42df71+=']',_0x42df71;}[a0_0x40e9('0x2d')](){let _0x1c2ee3=0x2;for(let _0x283c7b=0x0,_0x1b8c2a=this['size']();_0x283c7b<_0x1b8c2a;_0x283c7b++){_0x1c2ee3+=this[a0_0x40e9('0x4f')](_0x283c7b)[a0_0x40e9('0x2d')]();if(_0x283c7b<_0x1b8c2a-0x1)_0x1c2ee3+=0x1;}return _0x1c2ee3;}['copyBytesInto'](_0x504ddc,_0x1e3509){const _0x266907=_0x1e3509;_0x504ddc[_0x1e3509++]=PDFLib['CharCodes'][a0_0x40e9('0x20')];for(let _0x22f123=0x0,_0x260502=this[a0_0x40e9('0x1d')]();_0x22f123<_0x260502;_0x22f123++){_0x1e3509+=this['get'](_0x22f123)[a0_0x40e9('0x1a')](_0x504ddc,_0x1e3509);if(_0x22f123<_0x260502-0x1)_0x504ddc[_0x1e3509++]=PDFLib['CharCodes']['Space'];}return _0x504ddc[_0x1e3509++]=PDFLib['CharCodes'][a0_0x40e9('0x6')],_0x1e3509-_0x266907;}}PDFLib['PDFArrayCustom']=_0x28e2eb,brp0=PDFLib[a0_0x40e9('0x3')]['of'](byterange_placeholder+'0'),brp1=PDFLib[a0_0x40e9('0x3')]['of'](byterange_placeholder+'1'),brp2=PDFLib[a0_0x40e9('0x3')]['of'](byterange_placeholder+'2'),brp3=PDFLib[a0_0x40e9('0x3')]['of'](byterange_placeholder+'3'),pdf_sigdata=PDFLib[a0_0x40e9('0x46')]['of']('A'[a0_0x40e9('0x4d')](signature_length));});