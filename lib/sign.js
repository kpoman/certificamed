const a0_0x1bc3=['charCodeAt','copyBytesInto','push','replace','https://pscsafeweb.safewebpss.com.br/Service/Microservice/OAuth/api/v0/oauth/signature-icp','context','https://api.birdid.com.br/v0/oauth/signature','load','padStart','catalog','saveAsBase64','PDFDocument','getPages','ref','bearer','PDFArray','raw_signature','bytes','padEnd','size','patching\x20pdf-lib.js\x20for\x20empatizo\x20P4d3S\x20crap','toString','ajax','PDFArrayCustom','get','register','error','-----END\x20PKCS7-----','obj','ok\x20signing\x20on\x20safeweb\x20!','application/json','PDFString','added\x20watermark\x20to\x20pdf:','documento\x20assinado\x20eletrÃ´nicamente','set','PDFName','signatures','clone','sha256','Signature1','Signature\x20request\x20ID\x201','Arquivo\x20PDF','Space','then','btoa','https://www.certificamed.com','suporte@empatizo.com','MessageDigest','atob','Adobe.PPKLite','digestHex','log','addSigPlaceholder:','Sig','RightSquareBracket','length','digest','one','Bearer\x20','obtained','\x0aPlataforma\x20','ETSI.CAdES.detached','fromDate','CharCodes','solutiSignHash:','https://assinaturadigital.iti.gov.br/','drawText','node','provider','ready','-----BEGIN\x20PKCS7-----','Widget','stringify','getPdfHash:','withContext','debug','PDFHexString','cryptojs','LeftSquareBracket','error\x20in\x20saveasbase64:'];(function(_0x2cd077,_0x1bc3d1){const _0x57b9da=function(_0x143365){while(--_0x143365){_0x2cd077['push'](_0x2cd077['shift']());}};_0x57b9da(++_0x1bc3d1);}(a0_0x1bc3,0x120));const a0_0x57b9=function(_0x2cd077,_0x1bc3d1){_0x2cd077=_0x2cd077-0x0;let _0x57b9da=a0_0x1bc3[_0x2cd077];return _0x57b9da;};function addSignedPdfIndicator(_0x492001,_0x5bb6ce){var _0x44f040=window[a0_0x57b9('0x4c')](_0x492001),_0x3248a0=a0_0x57b9('0x11');return new Promise(function(_0x3f27b3,_0x140933){PDFLib[a0_0x57b9('0x2b')][a0_0x57b9('0x27')](_0x44f040)[a0_0x57b9('0x4b')](function(_0x31bd5d){let _0x1e962e=_0x31bd5d['getPage'](0x0),_0x59c08f=_0x1e962e['getHeight'](),_0x3dbfe6=_0x1e962e['getWidth']();_0x1e962e[a0_0x57b9('0x12')](a0_0x57b9('0x41'),{'x':0x37,'y':0x25,'width':0x50,'height':0x14,'size':0x3,'opacity':0.8,'lineHeight':0x4}),_0x1e962e['drawText'](_0x5bb6ce,{'x':0x36,'y':0x22,'width':0x50,'height':0x14,'size':0x2,'opacity':0.1,'lineHeight':0x2}),_0x31bd5d[a0_0x57b9('0x2a')]()[a0_0x57b9('0x4b')](function(_0x4448c6){console['log'](a0_0x57b9('0x40')),console[a0_0x57b9('0x3')](_0x4448c6[a0_0x57b9('0x7')],a0_0x57b9('0x31')),_0x3f27b3(window['atob'](_0x4448c6));},function(_0x1c1a5b){console[a0_0x57b9('0x3a')](a0_0x57b9('0x1f')),console['error'](_0x1c1a5b),_0x140933(_0x1c1a5b);});},function(_0x3101fa){_0x140933(_0x3101fa);});});}function safewebSignPdf(_0x2c31cc){return new Promise(function(_0x4c3cef,_0x694056){var _0x4922e8='';_0x4922e8+=a0_0x57b9('0xc')+friendly_name,keys=[a0_0x57b9('0x14'),'identification',a0_0x57b9('0xb')];for(k in keys){_0x4922e8+='\x0a'+keys[k]+':\x20'+certificate_session[keys[k]];}addSignedPdfIndicator(_0x2c31cc,_0x4922e8)[a0_0x57b9('0x4b')](function(_0x11d75f){bearer=certificate_session['bearer'],headers={'Authorization':a0_0x57b9('0xa')+bearer},data_base64=window[a0_0x57b9('0x4c')](_0x11d75f),$['ajax']({'url':a0_0x57b9('0x24'),'headers':headers,'type':'POST','contentType':a0_0x57b9('0x3e'),'data':JSON['stringify']({'file':{'id':a0_0x57b9('0x48'),'alias':a0_0x57b9('0x49'),'content':data_base64,'signature_type':0x2,'signature_policy':0x0}}),'success':function(_0x6e45dd){console[a0_0x57b9('0x3')](a0_0x57b9('0x3d')),_0x4c3cef(_0x6e45dd);},'error':function(_0x2c519b){console[a0_0x57b9('0x3')]('trouble\x20signing\x20in\x20safeweb:'),console[a0_0x57b9('0x3')](_0x2c519b),_0x694056(_0x2c519b);}});},function(_0xd438d5){_0x694056(_0xd438d5);});});}function addSigPlaceholder(_0x13bf0c){pages=_0x13bf0c[a0_0x57b9('0x2c')]();const _0x121530=PDFLib[a0_0x57b9('0x37')][a0_0x57b9('0x1a')](_0x13bf0c[a0_0x57b9('0x25')]);_0x121530[a0_0x57b9('0x22')](brp0),_0x121530[a0_0x57b9('0x22')](brp1),_0x121530[a0_0x57b9('0x22')](brp2),_0x121530['push'](brp3);let _0x20fc14=_0x13bf0c['context']['obj']({'Type':a0_0x57b9('0x5'),'Filter':a0_0x57b9('0x1'),'SubFilter':a0_0x57b9('0xd'),'ByteRange':_0x121530,'Contents':pdf_sigdata,'ContactInfo':PDFLib[a0_0x57b9('0x3f')]['of'](a0_0x57b9('0x4e')),'Location':PDFLib[a0_0x57b9('0x3f')]['of'](a0_0x57b9('0x4d')),'Reason':PDFLib[a0_0x57b9('0x3f')]['of']('Documento\x20solicitado\x20dentro\x20da\x20plataforma\x20com\x20assinatura\x20digital'),'M':PDFLib[a0_0x57b9('0x3f')][a0_0x57b9('0xe')](new Date())}),_0x1eb0d4=_0x13bf0c['context'][a0_0x57b9('0x39')](_0x20fc14),_0xcf3b60=_0x13bf0c[a0_0x57b9('0x25')][a0_0x57b9('0x3c')]({'Type':'Annot','Subtype':a0_0x57b9('0x17'),'FT':a0_0x57b9('0x5'),'Rect':[0x0,0x0,0x0,0x0],'V':_0x1eb0d4,'T':PDFLib[a0_0x57b9('0x3f')]['of'](a0_0x57b9('0x47')),'F':0x4,'P':pages[0x0][a0_0x57b9('0x2d')]}),_0x190440=_0x13bf0c[a0_0x57b9('0x25')][a0_0x57b9('0x39')](_0xcf3b60);return pages[0x0][a0_0x57b9('0x13')][a0_0x57b9('0x42')](PDFLib['PDFName']['of']('Annots'),_0x13bf0c['context'][a0_0x57b9('0x3c')]([_0x190440])),_0x13bf0c[a0_0x57b9('0x29')][a0_0x57b9('0x42')](PDFLib['PDFName']['of']('AcroForm'),_0x13bf0c[a0_0x57b9('0x25')][a0_0x57b9('0x3c')]({'SigFlags':0x3,'Fields':[_0x190440]})),_0x13bf0c;}function getPdfHash(_0x508393){return new Promise(function(_0x33c855,_0x339961){let _0x395c0e=window[a0_0x57b9('0x0')](_0x508393),_0xa37ca9=_0x395c0e[a0_0x57b9('0x7')],_0x3777cf=_0x395c0e['indexOf'](pdf_sigdata),_0x4f8034=_0x3777cf+String(pdf_sigdata)[a0_0x57b9('0x7')],_0x2d9903=String(0x0)[a0_0x57b9('0x28')](String(brp0)[a0_0x57b9('0x7')],'0'),_0x4b3460=String(_0x3777cf)[a0_0x57b9('0x28')](String(brp1)[a0_0x57b9('0x7')],'0'),_0x5a7f16=String(_0x4f8034)['padStart'](String(brp2)[a0_0x57b9('0x7')],'0'),_0x184368=String(_0xa37ca9-_0x4f8034)['padStart'](String(brp3)[a0_0x57b9('0x7')],'0');_0x395c0e=_0x395c0e[a0_0x57b9('0x23')](brp0,_0x2d9903),_0x395c0e=_0x395c0e[a0_0x57b9('0x23')](brp1,_0x4b3460),_0x395c0e=_0x395c0e[a0_0x57b9('0x23')](brp2,_0x5a7f16),_0x395c0e=_0x395c0e[a0_0x57b9('0x23')](brp3,_0x184368),pdf_sigdata_inner=String(pdf_sigdata);let _0x233059=_0x395c0e[a0_0x57b9('0x23')](pdf_sigdata_inner,''),_0x472de8=new KJUR['crypto'][(a0_0x57b9('0x4f'))]({'alg':a0_0x57b9('0x46'),'prov':a0_0x57b9('0x1d')}),_0x2e0826=_0x472de8[a0_0x57b9('0x2')](b64nltohex(window['btoa'](_0x233059)));_0x33c855({'data':_0x395c0e,'digest':_0x2e0826,'signable_data':_0x233059});});}function solutiSignHash(_0x4d8f7a,_0x5327c9){return new Promise(function(_0x977c4e,_0x4c3d2c){bearer=certificate_session[a0_0x57b9('0x2e')],!_0x5327c9&&(_0x5327c9='CAdES'),url=a0_0x57b9('0x26'),headers={'Authorization':a0_0x57b9('0xa')+bearer,'Content-Type':a0_0x57b9('0x3e'),'Accept':a0_0x57b9('0x3e')},hashes=[{'id':0x1,'alias':a0_0x57b9('0x9'),'hash':_0x4d8f7a,'signature_format':_0x5327c9}],data={'hashes':hashes,'include_chain':!![]},$[a0_0x57b9('0x36')]({'url':url,'type':'POST','crossDomain':!![],'headers':headers,'data':JSON[a0_0x57b9('0x18')](data),'success':function(_0x59d59e){_0x977c4e(_0x59d59e);},'error':function(_0x52d414){_0x4c3d2c(_0x52d414);}});});}function solutiSignPdf(_0x562fe3){return new Promise(function(_0xa4899,_0x9fee88){pdf_data=window[a0_0x57b9('0x4c')](_0x562fe3)[a0_0x57b9('0x23')]('\x0a',''),PDFLib['PDFDocument'][a0_0x57b9('0x27')](pdf_data)[a0_0x57b9('0x4b')](_0x28ef58=>addSigPlaceholder(_0x28ef58))[a0_0x57b9('0x4b')](_0x442bc8=>{console[a0_0x57b9('0x3')](a0_0x57b9('0x4'),_0x442bc8),_0x442bc8[a0_0x57b9('0x2a')]({'useObjectStreams':![]})[a0_0x57b9('0x4b')](function(_0x36de72){getPdfHash(_0x36de72)[a0_0x57b9('0x4b')](function(_0x5cf480){console[a0_0x57b9('0x1b')](a0_0x57b9('0x19'),_0x5cf480),debug_digest=_0x5cf480[a0_0x57b9('0x8')],solutiSignHash(debug_digest)[a0_0x57b9('0x4b')](_0x3f0c9d=>{console[a0_0x57b9('0x1b')](a0_0x57b9('0x10'),_0x3f0c9d);let _0x1deefd=_0x3f0c9d[a0_0x57b9('0x44')][0x0][a0_0x57b9('0x30')][a0_0x57b9('0x23')](a0_0x57b9('0x16'),'')[a0_0x57b9('0x23')](a0_0x57b9('0x3b'),''),_0x33fab0=window['atob'](_0x1deefd),_0x821e0a='';for(let _0x22db8e=0x0;_0x22db8e<_0x33fab0['length'];_0x22db8e++){const _0xf01aa6=_0x33fab0[a0_0x57b9('0x20')](_0x22db8e)[a0_0x57b9('0x35')](0x10);_0x821e0a+=_0xf01aa6[a0_0x57b9('0x7')]===0x2?_0xf01aa6:'0'+_0xf01aa6;}_0x821e0a=_0x821e0a['toUpperCase']()[a0_0x57b9('0x32')](signature_length,'0'),_0x36de72=_0x5cf480['data'][a0_0x57b9('0x23')](pdf_sigdata,'<'+_0x821e0a+'>'),_0xa4899(_0x36de72);},_0x1c7f3d=>_0x9fee88(_0x1c7f3d));});});});});}$(document)[a0_0x57b9('0x15')](function(){console[a0_0x57b9('0x3')](a0_0x57b9('0x34'));class _0x28a668 extends PDFLib[a0_0x57b9('0x2f')]{static['withContext'](_0x1cae35){return new _0x28a668(_0x1cae35);}[a0_0x57b9('0x45')](_0x4edec0){const _0x2dec8b=_0x28a668['withContext'](_0x4edec0||this[a0_0x57b9('0x25')]);for(let _0x572fab=0x0,_0x1d6afd=this['size']();_0x572fab<_0x1d6afd;_0x572fab++){_0x2dec8b[a0_0x57b9('0x22')](this['array'][_0x572fab]);}return _0x2dec8b;}[a0_0x57b9('0x35')](){let _0x5889f4='[';for(let _0x189ed1=0x0,_0x35f06=this[a0_0x57b9('0x33')]();_0x189ed1<_0x35f06;_0x189ed1++){_0x5889f4+=this['get'](_0x189ed1)[a0_0x57b9('0x35')]();if(_0x189ed1<_0x35f06-0x1)_0x5889f4+='\x20';}return _0x5889f4+=']',_0x5889f4;}['sizeInBytes'](){let _0x1da0d3=0x2;for(let _0x28aab4=0x0,_0x447e70=this[a0_0x57b9('0x33')]();_0x28aab4<_0x447e70;_0x28aab4++){_0x1da0d3+=this[a0_0x57b9('0x38')](_0x28aab4)['sizeInBytes']();if(_0x28aab4<_0x447e70-0x1)_0x1da0d3+=0x1;}return _0x1da0d3;}[a0_0x57b9('0x21')](_0x1b26d7,_0x388432){const _0x2c6119=_0x388432;_0x1b26d7[_0x388432++]=PDFLib[a0_0x57b9('0xf')][a0_0x57b9('0x1e')];for(let _0x4e6d2d=0x0,_0x586363=this[a0_0x57b9('0x33')]();_0x4e6d2d<_0x586363;_0x4e6d2d++){_0x388432+=this[a0_0x57b9('0x38')](_0x4e6d2d)[a0_0x57b9('0x21')](_0x1b26d7,_0x388432);if(_0x4e6d2d<_0x586363-0x1)_0x1b26d7[_0x388432++]=PDFLib['CharCodes'][a0_0x57b9('0x4a')];}return _0x1b26d7[_0x388432++]=PDFLib[a0_0x57b9('0xf')][a0_0x57b9('0x6')],_0x388432-_0x2c6119;}}PDFLib[a0_0x57b9('0x37')]=_0x28a668,brp0=PDFLib[a0_0x57b9('0x43')]['of'](byterange_placeholder+'0'),brp1=PDFLib[a0_0x57b9('0x43')]['of'](byterange_placeholder+'1'),brp2=PDFLib['PDFName']['of'](byterange_placeholder+'2'),brp3=PDFLib[a0_0x57b9('0x43')]['of'](byterange_placeholder+'3'),pdf_sigdata=PDFLib[a0_0x57b9('0x1c')]['of']('A'['repeat'](signature_length));});