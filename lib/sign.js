const a0_0x1144=['one','load','Widget','https://assinaturadigital.iti.gov.br/','patching\x20pdf-lib.js\x20for\x20empatizo\x20P4d3S\x20crap','getWidth','suporte@empatizo.com','getHeight','getPage','padEnd','https://api.birdid.com.br/v0/oauth/signature','Arquivo\x20PDF','identification','obj','catalog','digest','sha256','clone','trouble\x20signing\x20in\x20safeweb:','-----BEGIN\x20PKCS7-----','toString','Adobe.PPKLite','PDFName','Documento\x20solicitado\x20dentro\x20da\x20plataforma\x20com\x20assinatura\x20digital','set','Sig','PDFHexString','Annots','POST','-----END\x20PKCS7-----','raw_signature','documento\x20assinado\x20eletrÃ´nicamente','sizeInBytes','drawText','context','Space','error\x20in\x20saveasbase64:','Signature\x20request\x20ID\x201','push','cryptojs','getPdfHash:','indexOf','atob','length','solutiSignHash:','then','copyBytesInto','charCodeAt','ref','CharCodes','crypto','size','LeftSquareBracket','obtained','\x0aPlataforma\x20','replace','bytes','PDFArray','repeat','toUpperCase','ajax','RightSquareBracket','AcroForm','Bearer\x20','getPages','padStart','withContext','stringify','https://www.certificamed.com','ok\x20signing\x20on\x20safeweb\x20!','added\x20watermark\x20to\x20pdf:','btoa','array','saveAsBase64','register','log','ETSI.CAdES.detached','Annot','bearer','PDFArrayCustom','PDFString','CAdES','debug','get','digestHex','application/json','signatures'];(function(_0x24162b,_0x114440){const _0x4a7b87=function(_0x1959be){while(--_0x1959be){_0x24162b['push'](_0x24162b['shift']());}};_0x4a7b87(++_0x114440);}(a0_0x1144,0xfb));const a0_0x4a7b=function(_0x24162b,_0x114440){_0x24162b=_0x24162b-0x0;let _0x4a7b87=a0_0x1144[_0x24162b];return _0x4a7b87;};function addSignedPdfIndicator(_0x4edbc3,_0x1484f6){var _0x459b89=window[a0_0x4a7b('0x51')](_0x4edbc3),_0x5e0a7a=a0_0x4a7b('0xd');return new Promise(function(_0x2fbe31,_0x289d80){PDFLib['PDFDocument'][a0_0x4a7b('0xb')](_0x459b89)[a0_0x4a7b('0x37')](function(_0x160484){let _0x22f8ad=_0x160484[a0_0x4a7b('0x12')](0x0),_0x15b937=_0x22f8ad[a0_0x4a7b('0x11')](),_0x46b80c=_0x22f8ad[a0_0x4a7b('0xf')]();_0x22f8ad['drawText'](a0_0x4a7b('0x29'),{'x':0x37,'y':0x25,'width':0x50,'height':0x14,'size':0x3,'opacity':0.8,'lineHeight':0x4}),_0x22f8ad[a0_0x4a7b('0x2b')](_0x1484f6,{'x':0x36,'y':0x22,'width':0x50,'height':0x14,'size':0x2,'opacity':0.1,'lineHeight':0x2}),_0x160484[a0_0x4a7b('0x53')]()[a0_0x4a7b('0x37')](function(_0x1b3b32){console['log'](a0_0x4a7b('0x50')),console[a0_0x4a7b('0x55')](_0x1b3b32[a0_0x4a7b('0x35')],a0_0x4a7b('0x42')),_0x2fbe31(window[a0_0x4a7b('0x34')](_0x1b3b32));},function(_0x17f5cb){console['error'](a0_0x4a7b('0x2e')),console['error'](_0x17f5cb),_0x289d80(_0x17f5cb);});},function(_0x6582dd){_0x289d80(_0x6582dd);});});}function safewebSignPdf(_0x4e9363){return new Promise(function(_0x13e90e,_0x2cd83b){var _0x52d1e0='';_0x52d1e0+=a0_0x4a7b('0x40')+friendly_name,keys=['provider',a0_0x4a7b('0x16'),a0_0x4a7b('0x3f')];for(k in keys){_0x52d1e0+='\x0a'+keys[k]+':\x20'+certificate_session[keys[k]];}addSignedPdfIndicator(_0x4e9363,_0x52d1e0)[a0_0x4a7b('0x37')](function(_0x3184dc){bearer=certificate_session[a0_0x4a7b('0x1')],headers={'Authorization':a0_0x4a7b('0x49')+bearer},data_base64=window[a0_0x4a7b('0x51')](_0x3184dc),$[a0_0x4a7b('0x46')]({'url':'https://pscsafeweb.safewebpss.com.br/Service/Microservice/OAuth/api/v0/oauth/signature-icp','headers':headers,'type':a0_0x4a7b('0x26'),'contentType':a0_0x4a7b('0x8'),'data':JSON[a0_0x4a7b('0x4d')]({'file':{'id':a0_0x4a7b('0x2f'),'alias':a0_0x4a7b('0x15'),'content':data_base64,'signature_type':0x2,'signature_policy':0x0}}),'success':function(_0x22688d){console['log'](a0_0x4a7b('0x4f')),_0x13e90e(_0x22688d);},'error':function(_0x3a9163){console[a0_0x4a7b('0x55')](a0_0x4a7b('0x1c')),console[a0_0x4a7b('0x55')](_0x3a9163),_0x2cd83b(_0x3a9163);}});},function(_0x3fd815){_0x2cd83b(_0x3fd815);});});}function addSigPlaceholder(_0x3216c9){pages=_0x3216c9[a0_0x4a7b('0x4a')]();const _0x143e12=PDFLib[a0_0x4a7b('0x2')]['withContext'](_0x3216c9[a0_0x4a7b('0x2c')]);_0x143e12['push'](brp0),_0x143e12['push'](brp1),_0x143e12[a0_0x4a7b('0x30')](brp2),_0x143e12[a0_0x4a7b('0x30')](brp3);let _0x5d4452=_0x3216c9[a0_0x4a7b('0x2c')][a0_0x4a7b('0x17')]({'Type':a0_0x4a7b('0x23'),'Filter':a0_0x4a7b('0x1f'),'SubFilter':a0_0x4a7b('0x56'),'ByteRange':_0x143e12,'Contents':pdf_sigdata,'ContactInfo':PDFLib[a0_0x4a7b('0x3')]['of'](a0_0x4a7b('0x10')),'Location':PDFLib[a0_0x4a7b('0x3')]['of'](a0_0x4a7b('0x4e')),'Reason':PDFLib['PDFString']['of'](a0_0x4a7b('0x21')),'M':PDFLib['PDFString']['fromDate'](new Date())}),_0x3bc301=_0x3216c9[a0_0x4a7b('0x2c')][a0_0x4a7b('0x54')](_0x5d4452),_0xb3b4e6=_0x3216c9['context'][a0_0x4a7b('0x17')]({'Type':a0_0x4a7b('0x0'),'Subtype':a0_0x4a7b('0xc'),'FT':a0_0x4a7b('0x23'),'Rect':[0x0,0x0,0x0,0x0],'V':_0x3bc301,'T':PDFLib[a0_0x4a7b('0x3')]['of']('Signature1'),'F':0x4,'P':pages[0x0][a0_0x4a7b('0x3a')]}),_0x2efa18=_0x3216c9['context'][a0_0x4a7b('0x54')](_0xb3b4e6);return pages[0x0]['node'][a0_0x4a7b('0x22')](PDFLib['PDFName']['of'](a0_0x4a7b('0x25')),_0x3216c9[a0_0x4a7b('0x2c')][a0_0x4a7b('0x17')]([_0x2efa18])),_0x3216c9[a0_0x4a7b('0x18')]['set'](PDFLib[a0_0x4a7b('0x20')]['of'](a0_0x4a7b('0x48')),_0x3216c9['context'][a0_0x4a7b('0x17')]({'SigFlags':0x3,'Fields':[_0x2efa18]})),_0x3216c9;}function getPdfHash(_0x5f56b2){return new Promise(function(_0x1f0a21,_0x2a1b5f){let _0xe3e077=window[a0_0x4a7b('0x34')](_0x5f56b2),_0x20e3e9=_0xe3e077[a0_0x4a7b('0x35')],_0x57977a=_0xe3e077[a0_0x4a7b('0x33')](pdf_sigdata),_0x5f3432=_0x57977a+String(pdf_sigdata)[a0_0x4a7b('0x35')],_0x57bcd3=String(0x0)['padStart'](String(brp0)[a0_0x4a7b('0x35')],'0'),_0x4cccae=String(_0x57977a)['padStart'](String(brp1)[a0_0x4a7b('0x35')],'0'),_0x2b8c79=String(_0x5f3432)[a0_0x4a7b('0x4b')](String(brp2)[a0_0x4a7b('0x35')],'0'),_0x181379=String(_0x20e3e9-_0x5f3432)[a0_0x4a7b('0x4b')](String(brp3)[a0_0x4a7b('0x35')],'0');_0xe3e077=_0xe3e077[a0_0x4a7b('0x41')](brp0,_0x57bcd3),_0xe3e077=_0xe3e077[a0_0x4a7b('0x41')](brp1,_0x4cccae),_0xe3e077=_0xe3e077[a0_0x4a7b('0x41')](brp2,_0x2b8c79),_0xe3e077=_0xe3e077[a0_0x4a7b('0x41')](brp3,_0x181379),pdf_sigdata_inner=String(pdf_sigdata);let _0x742821=_0xe3e077[a0_0x4a7b('0x41')](pdf_sigdata_inner,''),_0x44f159=new KJUR[(a0_0x4a7b('0x3c'))]['MessageDigest']({'alg':a0_0x4a7b('0x1a'),'prov':a0_0x4a7b('0x31')}),_0x515c94=_0x44f159[a0_0x4a7b('0x7')](b64nltohex(window[a0_0x4a7b('0x51')](_0x742821)));_0x1f0a21({'data':_0xe3e077,'digest':_0x515c94,'signable_data':_0x742821});});}function solutiSignHash(_0x17da3e,_0xe4f74){return new Promise(function(_0x3ee5f4,_0x4ed063){bearer=certificate_session[a0_0x4a7b('0x1')],!_0xe4f74&&(_0xe4f74=a0_0x4a7b('0x4')),url=a0_0x4a7b('0x14'),headers={'Authorization':a0_0x4a7b('0x49')+bearer,'Content-Type':a0_0x4a7b('0x8'),'Accept':a0_0x4a7b('0x8')},hashes=[{'id':0x1,'alias':a0_0x4a7b('0xa'),'hash':_0x17da3e,'signature_format':_0xe4f74}],data={'hashes':hashes,'include_chain':!![]},$[a0_0x4a7b('0x46')]({'url':url,'type':a0_0x4a7b('0x26'),'crossDomain':!![],'headers':headers,'data':JSON[a0_0x4a7b('0x4d')](data),'success':function(_0x10945f){_0x3ee5f4(_0x10945f);},'error':function(_0x4ba68f){_0x4ed063(_0x4ba68f);}});});}function solutiSignPdf(_0x229270){return new Promise(function(_0x36db4c,_0x37199e){pdf_data=window[a0_0x4a7b('0x51')](_0x229270)[a0_0x4a7b('0x41')]('\x0a',''),PDFLib['PDFDocument'][a0_0x4a7b('0xb')](pdf_data)[a0_0x4a7b('0x37')](_0x2ec743=>addSigPlaceholder(_0x2ec743))[a0_0x4a7b('0x37')](_0x2b418c=>{console[a0_0x4a7b('0x55')]('addSigPlaceholder:',_0x2b418c),_0x2b418c['saveAsBase64']({'useObjectStreams':![]})[a0_0x4a7b('0x37')](function(_0x578f00){getPdfHash(_0x578f00)[a0_0x4a7b('0x37')](function(_0xe8bb77){console[a0_0x4a7b('0x5')](a0_0x4a7b('0x32'),_0xe8bb77),debug_digest=_0xe8bb77[a0_0x4a7b('0x19')],solutiSignHash(debug_digest)[a0_0x4a7b('0x37')](_0x33d9ea=>{console[a0_0x4a7b('0x5')](a0_0x4a7b('0x36'),_0x33d9ea);let _0x1a12e9=_0x33d9ea[a0_0x4a7b('0x9')][0x0][a0_0x4a7b('0x28')][a0_0x4a7b('0x41')](a0_0x4a7b('0x1d'),'')['replace'](a0_0x4a7b('0x27'),''),_0xd3e7f8=window[a0_0x4a7b('0x34')](_0x1a12e9),_0x452b0d='';for(let _0xa2eb4d=0x0;_0xa2eb4d<_0xd3e7f8['length'];_0xa2eb4d++){const _0x442397=_0xd3e7f8[a0_0x4a7b('0x39')](_0xa2eb4d)[a0_0x4a7b('0x1e')](0x10);_0x452b0d+=_0x442397[a0_0x4a7b('0x35')]===0x2?_0x442397:'0'+_0x442397;}_0x452b0d=_0x452b0d[a0_0x4a7b('0x45')]()[a0_0x4a7b('0x13')](signature_length,'0'),_0x578f00=_0xe8bb77['data']['replace'](pdf_sigdata,'<'+_0x452b0d+'>'),_0x36db4c(_0x578f00);},_0x397d16=>_0x37199e(_0x397d16));});});});});}$(document)['ready'](function(){console[a0_0x4a7b('0x55')](a0_0x4a7b('0xe'));class _0x1e91e9 extends PDFLib[a0_0x4a7b('0x43')]{static[a0_0x4a7b('0x4c')](_0x3fc5f3){return new _0x1e91e9(_0x3fc5f3);}[a0_0x4a7b('0x1b')](_0x1f5e0f){const _0x177a26=_0x1e91e9[a0_0x4a7b('0x4c')](_0x1f5e0f||this['context']);for(let _0x165d14=0x0,_0x343706=this[a0_0x4a7b('0x3d')]();_0x165d14<_0x343706;_0x165d14++){_0x177a26[a0_0x4a7b('0x30')](this[a0_0x4a7b('0x52')][_0x165d14]);}return _0x177a26;}[a0_0x4a7b('0x1e')](){let _0x43e479='[';for(let _0x375860=0x0,_0x7cb83f=this[a0_0x4a7b('0x3d')]();_0x375860<_0x7cb83f;_0x375860++){_0x43e479+=this['get'](_0x375860)[a0_0x4a7b('0x1e')]();if(_0x375860<_0x7cb83f-0x1)_0x43e479+='\x20';}return _0x43e479+=']',_0x43e479;}['sizeInBytes'](){let _0xb5c066=0x2;for(let _0x3b3d71=0x0,_0x23da71=this[a0_0x4a7b('0x3d')]();_0x3b3d71<_0x23da71;_0x3b3d71++){_0xb5c066+=this[a0_0x4a7b('0x6')](_0x3b3d71)[a0_0x4a7b('0x2a')]();if(_0x3b3d71<_0x23da71-0x1)_0xb5c066+=0x1;}return _0xb5c066;}[a0_0x4a7b('0x38')](_0x12ee0d,_0xb222ce){const _0x2acfc7=_0xb222ce;_0x12ee0d[_0xb222ce++]=PDFLib['CharCodes'][a0_0x4a7b('0x3e')];for(let _0x3143e8=0x0,_0x3ce236=this[a0_0x4a7b('0x3d')]();_0x3143e8<_0x3ce236;_0x3143e8++){_0xb222ce+=this[a0_0x4a7b('0x6')](_0x3143e8)[a0_0x4a7b('0x38')](_0x12ee0d,_0xb222ce);if(_0x3143e8<_0x3ce236-0x1)_0x12ee0d[_0xb222ce++]=PDFLib[a0_0x4a7b('0x3b')][a0_0x4a7b('0x2d')];}return _0x12ee0d[_0xb222ce++]=PDFLib[a0_0x4a7b('0x3b')][a0_0x4a7b('0x47')],_0xb222ce-_0x2acfc7;}}PDFLib['PDFArrayCustom']=_0x1e91e9,brp0=PDFLib[a0_0x4a7b('0x20')]['of'](byterange_placeholder+'0'),brp1=PDFLib['PDFName']['of'](byterange_placeholder+'1'),brp2=PDFLib[a0_0x4a7b('0x20')]['of'](byterange_placeholder+'2'),brp3=PDFLib[a0_0x4a7b('0x20')]['of'](byterange_placeholder+'3'),pdf_sigdata=PDFLib[a0_0x4a7b('0x24')]['of']('A'[a0_0x4a7b('0x44')](signature_length));});