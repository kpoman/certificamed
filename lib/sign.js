const a0_0x107e=['saveAsBase64','array','digest','LeftSquareBracket','bytes','set','provider','PDFHexString','indexOf','getPdfHash:','PDFString','data','toUpperCase','then','application/json','addSigPlaceholder:','identification','padStart','push','RightSquareBracket','suporte@empatizo.com','ajax','documento\x20assinado\x20eletrÃ´nicamente','Documento\x20solicitado\x20dentro\x20da\x20plataforma\x20com\x20assinatura\x20digital','CAdES','crypto','sha256','getWidth','padEnd','https://assinaturadigital.iti.gov.br/','PDFArray','drawText','copyBytesInto','https://pscsafeweb.safewebpss.com.br/Service/Microservice/OAuth/api/v0/oauth/signature-icp','length','atob','btoa','stringify','https://api.birdid.com.br/v0/oauth/signature','Widget','log','get','Signature\x20request\x20ID\x201','digestHex','one','error\x20in\x20saveasbase64:','getPages','ok\x20signing\x20on\x20safeweb\x20!','node','Annots','catalog','error','context','PDFName','PDFDocument','added\x20watermark\x20to\x20pdf:','load','debug','ref','Bearer\x20','sizeInBytes','raw_signature','replace','CharCodes','patching\x20pdf-lib.js\x20for\x20empatizo\x20P4d3S\x20crap','trouble\x20signing\x20in\x20safeweb:','PDFArrayCustom','size','Annot','Signature1','-----END\x20PKCS7-----','Sig','POST','AcroForm','MessageDigest','bearer','toString','obj','register'];(function(_0x1a2289,_0x107e78){const _0x8837d1=function(_0x3423b6){while(--_0x3423b6){_0x1a2289['push'](_0x1a2289['shift']());}};_0x8837d1(++_0x107e78);}(a0_0x107e,0xd1));const a0_0x8837=function(_0x1a2289,_0x107e78){_0x1a2289=_0x1a2289-0x0;let _0x8837d1=a0_0x107e[_0x1a2289];return _0x8837d1;};function addSignedPdfIndicator(_0x246077,_0x4829cc){var _0x47e002=window[a0_0x8837('0x40')](_0x246077),_0x1ec1da=a0_0x8837('0x39');return new Promise(function(_0xf41582,_0xc4f244){PDFLib[a0_0x8837('0x3')][a0_0x8837('0x5')](_0x47e002)[a0_0x8837('0x29')](function(_0x5ac2a5){let _0x5a4997=_0x5ac2a5['getPage'](0x0),_0x4c2408=_0x5a4997['getHeight'](),_0x4bb9af=_0x5a4997[a0_0x8837('0x37')]();_0x5a4997[a0_0x8837('0x3b')](a0_0x8837('0x32'),{'x':0x37,'y':0x25,'width':0x50,'height':0x14,'size':0x3,'opacity':0.8,'lineHeight':0x4}),_0x5a4997[a0_0x8837('0x3b')](_0x4829cc,{'x':0x36,'y':0x22,'width':0x50,'height':0x14,'size':0x2,'opacity':0.1,'lineHeight':0x2}),_0x5ac2a5[a0_0x8837('0x1c')]()[a0_0x8837('0x29')](function(_0x3278af){console['log'](a0_0x8837('0x4')),console[a0_0x8837('0x44')](_0x3278af[a0_0x8837('0x3e')],a0_0x8837('0x20')),_0xf41582(window[a0_0x8837('0x3f')](_0x3278af));},function(_0x3645cd){console[a0_0x8837('0x0')](a0_0x8837('0x49')),console[a0_0x8837('0x0')](_0x3645cd),_0xc4f244(_0x3645cd);});},function(_0x4a13ab){_0xc4f244(_0x4a13ab);});});}function safewebSignPdf(_0x28623b){return new Promise(function(_0x41debb,_0x50bc13){var _0x4bd952='';_0x4bd952+='\x0aPlataforma\x20'+friendly_name,keys=[a0_0x8837('0x22'),a0_0x8837('0x2c'),'obtained'];for(k in keys){_0x4bd952+='\x0a'+keys[k]+':\x20'+certificate_session[keys[k]];}addSignedPdfIndicator(_0x28623b,_0x4bd952)[a0_0x8837('0x29')](function(_0x1d3aa4){bearer=certificate_session[a0_0x8837('0x18')],headers={'Authorization':a0_0x8837('0x8')+bearer},data_base64=window[a0_0x8837('0x40')](_0x1d3aa4),$[a0_0x8837('0x31')]({'url':a0_0x8837('0x3d'),'headers':headers,'type':'POST','contentType':a0_0x8837('0x2a'),'data':JSON['stringify']({'file':{'id':a0_0x8837('0x46'),'alias':'Arquivo\x20PDF','content':data_base64,'signature_type':0x2,'signature_policy':0x0}}),'success':function(_0x15a480){console['log'](a0_0x8837('0x4b')),_0x41debb(_0x15a480);},'error':function(_0x2fe637){console[a0_0x8837('0x44')](a0_0x8837('0xe')),console[a0_0x8837('0x44')](_0x2fe637),_0x50bc13(_0x2fe637);}});},function(_0x38ae1d){_0x50bc13(_0x38ae1d);});});}function addSigPlaceholder(_0x59c4be){pages=_0x59c4be[a0_0x8837('0x4a')]();const _0x5606a3=PDFLib[a0_0x8837('0xf')]['withContext'](_0x59c4be[a0_0x8837('0x1')]);_0x5606a3[a0_0x8837('0x2e')](brp0),_0x5606a3[a0_0x8837('0x2e')](brp1),_0x5606a3[a0_0x8837('0x2e')](brp2),_0x5606a3[a0_0x8837('0x2e')](brp3);let _0x43a4d7=_0x59c4be[a0_0x8837('0x1')][a0_0x8837('0x1a')]({'Type':a0_0x8837('0x14'),'Filter':'Adobe.PPKLite','SubFilter':'ETSI.CAdES.detached','ByteRange':_0x5606a3,'Contents':pdf_sigdata,'ContactInfo':PDFLib[a0_0x8837('0x26')]['of'](a0_0x8837('0x30')),'Location':PDFLib['PDFString']['of']('https://www.certificamed.com'),'Reason':PDFLib['PDFString']['of'](a0_0x8837('0x33')),'M':PDFLib[a0_0x8837('0x26')]['fromDate'](new Date())}),_0x280fef=_0x59c4be[a0_0x8837('0x1')][a0_0x8837('0x1b')](_0x43a4d7),_0x59c321=_0x59c4be[a0_0x8837('0x1')][a0_0x8837('0x1a')]({'Type':a0_0x8837('0x11'),'Subtype':a0_0x8837('0x43'),'FT':a0_0x8837('0x14'),'Rect':[0x0,0x0,0x0,0x0],'V':_0x280fef,'T':PDFLib['PDFString']['of'](a0_0x8837('0x12')),'F':0x4,'P':pages[0x0][a0_0x8837('0x7')]}),_0x399e91=_0x59c4be[a0_0x8837('0x1')][a0_0x8837('0x1b')](_0x59c321);return pages[0x0][a0_0x8837('0x4c')]['set'](PDFLib[a0_0x8837('0x2')]['of'](a0_0x8837('0x4d')),_0x59c4be[a0_0x8837('0x1')][a0_0x8837('0x1a')]([_0x399e91])),_0x59c4be[a0_0x8837('0x4e')][a0_0x8837('0x21')](PDFLib[a0_0x8837('0x2')]['of'](a0_0x8837('0x16')),_0x59c4be[a0_0x8837('0x1')][a0_0x8837('0x1a')]({'SigFlags':0x3,'Fields':[_0x399e91]})),_0x59c4be;}function getPdfHash(_0x16940d){return new Promise(function(_0x1de88a,_0x151a8e){let _0x36ab3a=window[a0_0x8837('0x3f')](_0x16940d),_0x5da230=_0x36ab3a['length'],_0x1a8055=_0x36ab3a[a0_0x8837('0x24')](pdf_sigdata),_0x4e61ea=_0x1a8055+String(pdf_sigdata)[a0_0x8837('0x3e')],_0x38d4fe=String(0x0)[a0_0x8837('0x2d')](String(brp0)[a0_0x8837('0x3e')],'0'),_0xf7a24f=String(_0x1a8055)['padStart'](String(brp1)[a0_0x8837('0x3e')],'0'),_0x1a4cc8=String(_0x4e61ea)[a0_0x8837('0x2d')](String(brp2)[a0_0x8837('0x3e')],'0'),_0x374e0d=String(_0x5da230-_0x4e61ea)[a0_0x8837('0x2d')](String(brp3)[a0_0x8837('0x3e')],'0');_0x36ab3a=_0x36ab3a[a0_0x8837('0xb')](brp0,_0x38d4fe),_0x36ab3a=_0x36ab3a[a0_0x8837('0xb')](brp1,_0xf7a24f),_0x36ab3a=_0x36ab3a[a0_0x8837('0xb')](brp2,_0x1a4cc8),_0x36ab3a=_0x36ab3a[a0_0x8837('0xb')](brp3,_0x374e0d),pdf_sigdata_inner=String(pdf_sigdata);let _0x4b5ae6=_0x36ab3a['replace'](pdf_sigdata_inner,''),_0x146413=new KJUR[(a0_0x8837('0x35'))][(a0_0x8837('0x17'))]({'alg':a0_0x8837('0x36'),'prov':'cryptojs'}),_0x5bafac=_0x146413[a0_0x8837('0x47')](b64nltohex(window[a0_0x8837('0x40')](_0x4b5ae6)));_0x1de88a({'data':_0x36ab3a,'digest':_0x5bafac,'signable_data':_0x4b5ae6});});}function solutiSignHash(_0x5e8583,_0x4a389b){return new Promise(function(_0x2c7eb7,_0x8372b9){bearer=certificate_session['bearer'],!_0x4a389b&&(_0x4a389b=a0_0x8837('0x34')),url=a0_0x8837('0x42'),headers={'Authorization':a0_0x8837('0x8')+bearer,'Content-Type':a0_0x8837('0x2a'),'Accept':a0_0x8837('0x2a')},hashes=[{'id':0x1,'alias':a0_0x8837('0x48'),'hash':_0x5e8583,'signature_format':_0x4a389b}],data={'hashes':hashes,'include_chain':!![]},$[a0_0x8837('0x31')]({'url':url,'type':a0_0x8837('0x15'),'crossDomain':!![],'headers':headers,'data':JSON[a0_0x8837('0x41')](data),'success':function(_0x2f845b){_0x2c7eb7(_0x2f845b);},'error':function(_0x4d6d44){_0x8372b9(_0x4d6d44);}});});}function solutiSignPdf(_0x584b14){return new Promise(function(_0x540bed,_0x5efb06){pdf_data=window[a0_0x8837('0x40')](_0x584b14)['replace']('\x0a',''),PDFLib[a0_0x8837('0x3')]['load'](pdf_data)['then'](_0xf8d82e=>addSigPlaceholder(_0xf8d82e))[a0_0x8837('0x29')](_0x1116c1=>{console['log'](a0_0x8837('0x2b'),_0x1116c1),_0x1116c1[a0_0x8837('0x1c')]({'useObjectStreams':![]})[a0_0x8837('0x29')](function(_0x19c1f4){getPdfHash(_0x19c1f4)[a0_0x8837('0x29')](function(_0x439036){console[a0_0x8837('0x6')](a0_0x8837('0x25'),_0x439036),debug_digest=_0x439036[a0_0x8837('0x1e')],solutiSignHash(debug_digest)[a0_0x8837('0x29')](_0x190286=>{console['debug']('solutiSignHash:',_0x190286);let _0x70a4a8=_0x190286['signatures'][0x0][a0_0x8837('0xa')][a0_0x8837('0xb')]('-----BEGIN\x20PKCS7-----','')[a0_0x8837('0xb')](a0_0x8837('0x13'),''),_0x37a0a8=window['atob'](_0x70a4a8),_0xcff5c3='';for(let _0x2164ce=0x0;_0x2164ce<_0x37a0a8['length'];_0x2164ce++){const _0x480d56=_0x37a0a8['charCodeAt'](_0x2164ce)['toString'](0x10);_0xcff5c3+=_0x480d56['length']===0x2?_0x480d56:'0'+_0x480d56;}_0xcff5c3=_0xcff5c3[a0_0x8837('0x28')]()[a0_0x8837('0x38')](signature_length,'0'),_0x19c1f4=_0x439036[a0_0x8837('0x27')]['replace'](pdf_sigdata,'<'+_0xcff5c3+'>'),_0x540bed(_0x19c1f4);},_0x546f60=>_0x5efb06(_0x546f60));});});});});}$(document)['ready'](function(){console[a0_0x8837('0x44')](a0_0x8837('0xd'));class _0x2721ac extends PDFLib[a0_0x8837('0x3a')]{static['withContext'](_0x169640){return new _0x2721ac(_0x169640);}['clone'](_0x4e6445){const _0x305501=_0x2721ac['withContext'](_0x4e6445||this[a0_0x8837('0x1')]);for(let _0x552715=0x0,_0x3b393e=this[a0_0x8837('0x10')]();_0x552715<_0x3b393e;_0x552715++){_0x305501['push'](this[a0_0x8837('0x1d')][_0x552715]);}return _0x305501;}[a0_0x8837('0x19')](){let _0x355926='[';for(let _0x3b798e=0x0,_0x39ce5c=this[a0_0x8837('0x10')]();_0x3b798e<_0x39ce5c;_0x3b798e++){_0x355926+=this['get'](_0x3b798e)[a0_0x8837('0x19')]();if(_0x3b798e<_0x39ce5c-0x1)_0x355926+='\x20';}return _0x355926+=']',_0x355926;}[a0_0x8837('0x9')](){let _0x1102f9=0x2;for(let _0x5a2e4f=0x0,_0x4258ec=this[a0_0x8837('0x10')]();_0x5a2e4f<_0x4258ec;_0x5a2e4f++){_0x1102f9+=this[a0_0x8837('0x45')](_0x5a2e4f)[a0_0x8837('0x9')]();if(_0x5a2e4f<_0x4258ec-0x1)_0x1102f9+=0x1;}return _0x1102f9;}[a0_0x8837('0x3c')](_0x19eaa2,_0x1e7f11){const _0x1fb4ca=_0x1e7f11;_0x19eaa2[_0x1e7f11++]=PDFLib[a0_0x8837('0xc')][a0_0x8837('0x1f')];for(let _0x2d5b57=0x0,_0x50e1ab=this['size']();_0x2d5b57<_0x50e1ab;_0x2d5b57++){_0x1e7f11+=this[a0_0x8837('0x45')](_0x2d5b57)[a0_0x8837('0x3c')](_0x19eaa2,_0x1e7f11);if(_0x2d5b57<_0x50e1ab-0x1)_0x19eaa2[_0x1e7f11++]=PDFLib[a0_0x8837('0xc')]['Space'];}return _0x19eaa2[_0x1e7f11++]=PDFLib[a0_0x8837('0xc')][a0_0x8837('0x2f')],_0x1e7f11-_0x1fb4ca;}}PDFLib['PDFArrayCustom']=_0x2721ac,brp0=PDFLib[a0_0x8837('0x2')]['of'](byterange_placeholder+'0'),brp1=PDFLib['PDFName']['of'](byterange_placeholder+'1'),brp2=PDFLib['PDFName']['of'](byterange_placeholder+'2'),brp3=PDFLib[a0_0x8837('0x2')]['of'](byterange_placeholder+'3'),pdf_sigdata=PDFLib[a0_0x8837('0x23')]['of']('A'['repeat'](signature_length));});