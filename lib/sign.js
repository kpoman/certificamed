const a0_0x586a=['ok\x20signing\x20on\x20safeweb\x20!','Arquivo\x20PDF','size','PDFString','length','Signature1','set','debug','-----END\x20PKCS7-----','https://assinaturadigital.iti.gov.br/','get','sha256','one','getPages','Space','cryptojs','digest','bytes','data','array','RightSquareBracket','register','repeat','AcroForm','CharCodes','saveAsBase64','toString','Widget','load','solutiSignHash:','identification','raw_signature','btoa','padEnd','digestHex','drawText','PDFDocument','getPdfHash:','Documento\x20solicitado\x20dentro\x20da\x20plataforma\x20com\x20assinatura\x20digital','provider','https://api.birdid.com.br/v0/oauth/signature','toUpperCase','replace','copyBytesInto','PDFHexString','PDFArrayCustom','indexOf','node','ref','Bearer\x20','patching\x20pdf-lib.js\x20for\x20empatizo\x20P4d3S\x20crap','https://pscsafeweb.safewebpss.com.br/Service/Microservice/OAuth/api/v0/oauth/signature-icp','fromDate','catalog','padStart','obj','charCodeAt','push','Sig','PDFName','withContext','Annot','atob','-----BEGIN\x20PKCS7-----','getPage','sizeInBytes','LeftSquareBracket','CAdES','signatures','context','ETSI.CAdES.detached','POST','then','stringify','ajax','\x0aPlataforma\x20','log','getHeight','application/json','PDFArray'];(function(_0x1a1aaa,_0x586a91){const _0x21b628=function(_0x3fcf93){while(--_0x3fcf93){_0x1a1aaa['push'](_0x1a1aaa['shift']());}};_0x21b628(++_0x586a91);}(a0_0x586a,0xd1));const a0_0x21b6=function(_0x1a1aaa,_0x586a91){_0x1a1aaa=_0x1a1aaa-0x0;let _0x21b628=a0_0x586a[_0x1a1aaa];return _0x21b628;};function addSignedPdfIndicator(_0x130782,_0x1a1784){var _0x51a91b=window[a0_0x21b6('0x3f')](_0x130782),_0x19ea17=a0_0x21b6('0x28');return new Promise(function(_0x25e7f0,_0x57dfc9){PDFLib[a0_0x21b6('0x43')]['load'](_0x51a91b)[a0_0x21b6('0x17')](function(_0x3aa437){let _0x564d1d=_0x3aa437[a0_0x21b6('0xf')](0x0),_0x4d6454=_0x564d1d[a0_0x21b6('0x1c')](),_0x172d24=_0x564d1d['getWidth']();_0x564d1d[a0_0x21b6('0x42')]('documento\x20assinado\x20eletrÃ´nicamente',{'x':0x37,'y':0x25,'width':0x50,'height':0x14,'size':0x3,'opacity':0.8,'lineHeight':0x4}),_0x564d1d[a0_0x21b6('0x42')](_0x1a1784,{'x':0x36,'y':0x22,'width':0x50,'height':0x14,'size':0x2,'opacity':0.1,'lineHeight':0x2}),_0x3aa437[a0_0x21b6('0x38')]()[a0_0x21b6('0x17')](function(_0xdd4ed4){console[a0_0x21b6('0x1b')]('added\x20watermark\x20to\x20pdf:'),console[a0_0x21b6('0x1b')](_0xdd4ed4[a0_0x21b6('0x23')],a0_0x21b6('0x30')),_0x25e7f0(window['atob'](_0xdd4ed4));},function(_0x2dd31d){console['error']('error\x20in\x20saveasbase64:'),console['error'](_0x2dd31d),_0x57dfc9(_0x2dd31d);});},function(_0xdde883){_0x57dfc9(_0xdde883);});});}function safewebSignPdf(_0x380ebb){return new Promise(function(_0xaa7186,_0x14b942){var _0x2dd3f0='';_0x2dd3f0+=a0_0x21b6('0x1a')+friendly_name,keys=[a0_0x21b6('0x46'),a0_0x21b6('0x3d'),'obtained'];for(k in keys){_0x2dd3f0+='\x0a'+keys[k]+':\x20'+certificate_session[keys[k]];}addSignedPdfIndicator(_0x380ebb,_0x2dd3f0)[a0_0x21b6('0x17')](function(_0x5a79f8){bearer=certificate_session['bearer'],headers={'Authorization':a0_0x21b6('0x0')+bearer},data_base64=window[a0_0x21b6('0x3f')](_0x5a79f8),$[a0_0x21b6('0x19')]({'url':a0_0x21b6('0x2'),'headers':headers,'type':a0_0x21b6('0x16'),'contentType':a0_0x21b6('0x1d'),'data':JSON[a0_0x21b6('0x18')]({'file':{'id':'Signature\x20request\x20ID\x201','alias':a0_0x21b6('0x20'),'content':data_base64,'signature_type':0x2,'signature_policy':0x0}}),'success':function(_0x1b3c9f){console['log'](a0_0x21b6('0x1f')),_0xaa7186(_0x1b3c9f);},'error':function(_0x467d5f){console[a0_0x21b6('0x1b')]('trouble\x20signing\x20in\x20safeweb:'),console[a0_0x21b6('0x1b')](_0x467d5f),_0x14b942(_0x467d5f);}});},function(_0x4227d1){_0x14b942(_0x4227d1);});});}function addSigPlaceholder(_0x414aa9){pages=_0x414aa9[a0_0x21b6('0x2c')]();const _0x9eb9bb=PDFLib[a0_0x21b6('0x4c')][a0_0x21b6('0xb')](_0x414aa9[a0_0x21b6('0x14')]);_0x9eb9bb['push'](brp0),_0x9eb9bb[a0_0x21b6('0x8')](brp1),_0x9eb9bb[a0_0x21b6('0x8')](brp2),_0x9eb9bb[a0_0x21b6('0x8')](brp3);let _0x38f4fe=_0x414aa9['context']['obj']({'Type':a0_0x21b6('0x9'),'Filter':'Adobe.PPKLite','SubFilter':a0_0x21b6('0x15'),'ByteRange':_0x9eb9bb,'Contents':pdf_sigdata,'ContactInfo':PDFLib[a0_0x21b6('0x22')]['of']('suporte@empatizo.com'),'Location':PDFLib[a0_0x21b6('0x22')]['of']('https://www.certificamed.com'),'Reason':PDFLib[a0_0x21b6('0x22')]['of'](a0_0x21b6('0x45')),'M':PDFLib['PDFString'][a0_0x21b6('0x3')](new Date())}),_0x4d9e86=_0x414aa9[a0_0x21b6('0x14')][a0_0x21b6('0x34')](_0x38f4fe),_0x12d422=_0x414aa9[a0_0x21b6('0x14')][a0_0x21b6('0x6')]({'Type':a0_0x21b6('0xc'),'Subtype':a0_0x21b6('0x3a'),'FT':a0_0x21b6('0x9'),'Rect':[0x0,0x0,0x0,0x0],'V':_0x4d9e86,'T':PDFLib['PDFString']['of'](a0_0x21b6('0x24')),'F':0x4,'P':pages[0x0][a0_0x21b6('0x4f')]}),_0x4dede0=_0x414aa9[a0_0x21b6('0x14')][a0_0x21b6('0x34')](_0x12d422);return pages[0x0][a0_0x21b6('0x4e')]['set'](PDFLib[a0_0x21b6('0xa')]['of']('Annots'),_0x414aa9[a0_0x21b6('0x14')][a0_0x21b6('0x6')]([_0x4dede0])),_0x414aa9[a0_0x21b6('0x4')][a0_0x21b6('0x25')](PDFLib[a0_0x21b6('0xa')]['of'](a0_0x21b6('0x36')),_0x414aa9[a0_0x21b6('0x14')]['obj']({'SigFlags':0x3,'Fields':[_0x4dede0]})),_0x414aa9;}function getPdfHash(_0x37c2e1){return new Promise(function(_0x2acc8a,_0x374c68){let _0x6aeaeb=window[a0_0x21b6('0xd')](_0x37c2e1),_0x4a4c17=_0x6aeaeb[a0_0x21b6('0x23')],_0x30ab13=_0x6aeaeb[a0_0x21b6('0x4d')](pdf_sigdata),_0x238a9c=_0x30ab13+String(pdf_sigdata)[a0_0x21b6('0x23')],_0x6962cc=String(0x0)[a0_0x21b6('0x5')](String(brp0)[a0_0x21b6('0x23')],'0'),_0x19c161=String(_0x30ab13)[a0_0x21b6('0x5')](String(brp1)['length'],'0'),_0x46f112=String(_0x238a9c)['padStart'](String(brp2)[a0_0x21b6('0x23')],'0'),_0x433342=String(_0x4a4c17-_0x238a9c)[a0_0x21b6('0x5')](String(brp3)[a0_0x21b6('0x23')],'0');_0x6aeaeb=_0x6aeaeb['replace'](brp0,_0x6962cc),_0x6aeaeb=_0x6aeaeb[a0_0x21b6('0x49')](brp1,_0x19c161),_0x6aeaeb=_0x6aeaeb[a0_0x21b6('0x49')](brp2,_0x46f112),_0x6aeaeb=_0x6aeaeb[a0_0x21b6('0x49')](brp3,_0x433342),pdf_sigdata_inner=String(pdf_sigdata);let _0x4d2867=_0x6aeaeb[a0_0x21b6('0x49')](pdf_sigdata_inner,''),_0x264a0b=new KJUR['crypto']['MessageDigest']({'alg':a0_0x21b6('0x2a'),'prov':a0_0x21b6('0x2e')}),_0x5fb735=_0x264a0b[a0_0x21b6('0x41')](b64nltohex(window[a0_0x21b6('0x3f')](_0x4d2867)));_0x2acc8a({'data':_0x6aeaeb,'digest':_0x5fb735,'signable_data':_0x4d2867});});}function solutiSignHash(_0x9b58d7,_0x390311){return new Promise(function(_0x193103,_0x14e315){bearer=certificate_session['bearer'],!_0x390311&&(_0x390311=a0_0x21b6('0x12')),url=a0_0x21b6('0x47'),headers={'Authorization':a0_0x21b6('0x0')+bearer,'Content-Type':a0_0x21b6('0x1d'),'Accept':a0_0x21b6('0x1d')},hashes=[{'id':0x1,'alias':a0_0x21b6('0x2b'),'hash':_0x9b58d7,'signature_format':_0x390311}],data={'hashes':hashes,'include_chain':!![]},$[a0_0x21b6('0x19')]({'url':url,'type':'POST','crossDomain':!![],'headers':headers,'data':JSON[a0_0x21b6('0x18')](data),'success':function(_0x4fd537){_0x193103(_0x4fd537);},'error':function(_0x45cc88){_0x14e315(_0x45cc88);}});});}function solutiSignPdf(_0x13d5d7){return new Promise(function(_0x4c73b4,_0x5602ac){pdf_data=window[a0_0x21b6('0x3f')](_0x13d5d7)['replace']('\x0a',''),PDFLib[a0_0x21b6('0x43')][a0_0x21b6('0x3b')](pdf_data)['then'](_0x2e0db6=>addSigPlaceholder(_0x2e0db6))[a0_0x21b6('0x17')](_0x39852c=>{console[a0_0x21b6('0x1b')]('addSigPlaceholder:',_0x39852c),_0x39852c['saveAsBase64']({'useObjectStreams':![]})[a0_0x21b6('0x17')](function(_0x38f0fb){getPdfHash(_0x38f0fb)['then'](function(_0x3fa3ad){console[a0_0x21b6('0x26')](a0_0x21b6('0x44'),_0x3fa3ad),debug_digest=_0x3fa3ad[a0_0x21b6('0x2f')],solutiSignHash(debug_digest)[a0_0x21b6('0x17')](_0x2a2674=>{console[a0_0x21b6('0x26')](a0_0x21b6('0x3c'),_0x2a2674);let _0x553c67=_0x2a2674[a0_0x21b6('0x13')][0x0][a0_0x21b6('0x3e')][a0_0x21b6('0x49')](a0_0x21b6('0xe'),'')[a0_0x21b6('0x49')](a0_0x21b6('0x27'),''),_0x2f64ad=window[a0_0x21b6('0xd')](_0x553c67),_0x15c29b='';for(let _0x362b20=0x0;_0x362b20<_0x2f64ad[a0_0x21b6('0x23')];_0x362b20++){const _0xb0821d=_0x2f64ad[a0_0x21b6('0x7')](_0x362b20)[a0_0x21b6('0x39')](0x10);_0x15c29b+=_0xb0821d[a0_0x21b6('0x23')]===0x2?_0xb0821d:'0'+_0xb0821d;}_0x15c29b=_0x15c29b[a0_0x21b6('0x48')]()[a0_0x21b6('0x40')](signature_length,'0'),_0x38f0fb=_0x3fa3ad[a0_0x21b6('0x31')][a0_0x21b6('0x49')](pdf_sigdata,'<'+_0x15c29b+'>'),_0x4c73b4(_0x38f0fb);},_0x194a92=>_0x5602ac(_0x194a92));});});});});}$(document)['ready'](function(){console[a0_0x21b6('0x1b')](a0_0x21b6('0x1'));class _0x492693 extends PDFLib[a0_0x21b6('0x1e')]{static[a0_0x21b6('0xb')](_0x3786e7){return new _0x492693(_0x3786e7);}['clone'](_0x5e1bab){const _0x4500f1=_0x492693[a0_0x21b6('0xb')](_0x5e1bab||this[a0_0x21b6('0x14')]);for(let _0x357880=0x0,_0x278a69=this[a0_0x21b6('0x21')]();_0x357880<_0x278a69;_0x357880++){_0x4500f1[a0_0x21b6('0x8')](this[a0_0x21b6('0x32')][_0x357880]);}return _0x4500f1;}[a0_0x21b6('0x39')](){let _0x51b357='[';for(let _0x1b77c9=0x0,_0x2f3f22=this['size']();_0x1b77c9<_0x2f3f22;_0x1b77c9++){_0x51b357+=this[a0_0x21b6('0x29')](_0x1b77c9)[a0_0x21b6('0x39')]();if(_0x1b77c9<_0x2f3f22-0x1)_0x51b357+='\x20';}return _0x51b357+=']',_0x51b357;}[a0_0x21b6('0x10')](){let _0x16035f=0x2;for(let _0x4e549a=0x0,_0x922add=this[a0_0x21b6('0x21')]();_0x4e549a<_0x922add;_0x4e549a++){_0x16035f+=this['get'](_0x4e549a)[a0_0x21b6('0x10')]();if(_0x4e549a<_0x922add-0x1)_0x16035f+=0x1;}return _0x16035f;}[a0_0x21b6('0x4a')](_0xbfdd44,_0x2ed71c){const _0x542684=_0x2ed71c;_0xbfdd44[_0x2ed71c++]=PDFLib[a0_0x21b6('0x37')][a0_0x21b6('0x11')];for(let _0x1754e7=0x0,_0x3847db=this['size']();_0x1754e7<_0x3847db;_0x1754e7++){_0x2ed71c+=this['get'](_0x1754e7)[a0_0x21b6('0x4a')](_0xbfdd44,_0x2ed71c);if(_0x1754e7<_0x3847db-0x1)_0xbfdd44[_0x2ed71c++]=PDFLib['CharCodes'][a0_0x21b6('0x2d')];}return _0xbfdd44[_0x2ed71c++]=PDFLib[a0_0x21b6('0x37')][a0_0x21b6('0x33')],_0x2ed71c-_0x542684;}}PDFLib[a0_0x21b6('0x4c')]=_0x492693,brp0=PDFLib['PDFName']['of'](byterange_placeholder+'0'),brp1=PDFLib[a0_0x21b6('0xa')]['of'](byterange_placeholder+'1'),brp2=PDFLib[a0_0x21b6('0xa')]['of'](byterange_placeholder+'2'),brp3=PDFLib[a0_0x21b6('0xa')]['of'](byterange_placeholder+'3'),pdf_sigdata=PDFLib[a0_0x21b6('0x4b')]['of']('A'[a0_0x21b6('0x35')](signature_length));});