const a0_0x2d67=['getPages','padEnd','addSigPlaceholder:','bearer','error','debug','get','identification','charCodeAt','digest','catalog','btoa','copyBytesInto','added\x20watermark\x20to\x20pdf:','patching\x20pdf-lib.js\x20for\x20empatizo\x20P4d3S\x20crap','POST','CharCodes','getWidth','cryptojs','node','ok\x20signing\x20on\x20safeweb\x20!','PDFDocument','solutiSignHash:','size','Widget','obtained','LeftSquareBracket','https://www.certificamed.com','Arquivo\x20PDF','fromDate','context','Signature\x20request\x20ID\x201','log','PDFHexString','length','ajax','bytes','RightSquareBracket','PDFName','padStart','xxBRPxxxx','-----BEGIN\x20PKCS7-----','register','documento\x20assinado\x20eletrÃ´nicamente','trouble\x20signing\x20in\x20safeweb:','saveAsBase64','getPdfHash:','Sig','crypto','atob','withContext','toString','Documento\x20solicitado\x20dentro\x20da\x20plataforma\x20com\x20assinatura\x20digital','replace','PDFArrayCustom','PDFString','https://pscsafeweb.safewebpss.com.br/Service/Microservice/OAuth/api/v0/oauth/signature-icp','toUpperCase','error\x20in\x20saveasbase64:','-----END\x20PKCS7-----','ref','push','obj','\x0aPlataforma\x20','one','set','getPage','then','Space','array','drawText','getHeight','AcroForm','Bearer\x20','data','Signature1','suporte@empatizo.com','sizeInBytes','indexOf','application/json','repeat','signatures','ETSI.CAdES.detached','https://assinaturadigital.iti.gov.br/','digestHex','CAdES','load'];(function(_0x290688,_0x2d67d7){const _0x3fae55=function(_0x221f29){while(--_0x221f29){_0x290688['push'](_0x290688['shift']());}};_0x3fae55(++_0x2d67d7);}(a0_0x2d67,0x110));const a0_0x3fae=function(_0x290688,_0x2d67d7){_0x290688=_0x290688-0x0;let _0x3fae55=a0_0x2d67[_0x290688];return _0x3fae55;};var byterange_placeholder=a0_0x3fae('0x1d'),signature_length=0x20*0x400,brp0=null,brp1=null,brp2=null,brp3=null,pdf_sigdata=null;function addSignedPdfIndicator(_0x14e28c,_0x1be6be){var _0x537858=window[a0_0x3fae('0x0')](_0x14e28c),_0x1cb717=a0_0x3fae('0x48');return new Promise(function(_0x315b2e,_0x1387e1){PDFLib['PDFDocument'][a0_0x3fae('0x4b')](_0x537858)['then'](function(_0x1258ef){let _0xac7341=_0x1258ef[a0_0x3fae('0x37')](0x0),_0x2cd095=_0xac7341[a0_0x3fae('0x3c')](),_0x1e85d3=_0xac7341[a0_0x3fae('0x6')]();_0xac7341[a0_0x3fae('0x3b')](a0_0x3fae('0x20'),{'x':0x37,'y':0x25,'width':0x50,'height':0x14,'size':0x3,'opacity':0.8,'lineHeight':0x4}),_0xac7341['drawText'](_0x1be6be,{'x':0x36,'y':0x22,'width':0x50,'height':0x14,'size':0x2,'opacity':0.1,'lineHeight':0x2}),_0x1258ef[a0_0x3fae('0x22')]()[a0_0x3fae('0x38')](function(_0x543208){console[a0_0x3fae('0x15')](a0_0x3fae('0x2')),console[a0_0x3fae('0x15')](_0x543208[a0_0x3fae('0x17')],a0_0x3fae('0x19')),_0x315b2e(window['atob'](_0x543208));},function(_0x24615b){console[a0_0x3fae('0x50')](a0_0x3fae('0x2f')),console[a0_0x3fae('0x50')](_0x24615b),_0x1387e1(_0x24615b);});},function(_0x3c4a60){_0x1387e1(_0x3c4a60);});});}function safewebSignPdf(_0x3c57bb){return new Promise(function(_0x3ae816,_0x309acd){var _0x5bdabe='';_0x5bdabe+=a0_0x3fae('0x34')+friendly_name,keys=['provider',a0_0x3fae('0x53'),a0_0x3fae('0xe')];for(k in keys){_0x5bdabe+='\x0a'+keys[k]+':\x20'+certificate_session[keys[k]];}addSignedPdfIndicator(_0x3c57bb,_0x5bdabe)['then'](function(_0x251b79){bearer=certificate_session[a0_0x3fae('0x4f')],headers={'Authorization':a0_0x3fae('0x3e')+bearer},data_base64=window[a0_0x3fae('0x0')](_0x251b79),$[a0_0x3fae('0x18')]({'url':a0_0x3fae('0x2d'),'headers':headers,'type':'POST','contentType':'application/json','data':JSON['stringify']({'file':{'id':a0_0x3fae('0x14'),'alias':a0_0x3fae('0x11'),'content':data_base64,'signature_type':0x2,'signature_policy':0x0}}),'success':function(_0x1b0847){console[a0_0x3fae('0x15')](a0_0x3fae('0x9')),_0x3ae816(_0x1b0847);},'error':function(_0x41e375){console[a0_0x3fae('0x15')](a0_0x3fae('0x21')),console[a0_0x3fae('0x15')](_0x41e375),_0x309acd(_0x41e375);}});},function(_0x23c114){_0x309acd(_0x23c114);});});}function addSigPlaceholder(_0x5df8a6){pages=_0x5df8a6[a0_0x3fae('0x4c')]();const _0x44c88e=PDFLib[a0_0x3fae('0x2b')]['withContext'](_0x5df8a6[a0_0x3fae('0x13')]);_0x44c88e['push'](brp0),_0x44c88e[a0_0x3fae('0x32')](brp1),_0x44c88e[a0_0x3fae('0x32')](brp2),_0x44c88e[a0_0x3fae('0x32')](brp3);let _0x371b11=_0x5df8a6[a0_0x3fae('0x13')]['obj']({'Type':a0_0x3fae('0x24'),'Filter':'Adobe.PPKLite','SubFilter':a0_0x3fae('0x47'),'ByteRange':_0x44c88e,'Contents':pdf_sigdata,'ContactInfo':PDFLib[a0_0x3fae('0x2c')]['of'](a0_0x3fae('0x41')),'Location':PDFLib[a0_0x3fae('0x2c')]['of'](a0_0x3fae('0x10')),'Reason':PDFLib[a0_0x3fae('0x2c')]['of'](a0_0x3fae('0x29')),'M':PDFLib[a0_0x3fae('0x2c')][a0_0x3fae('0x12')](new Date())}),_0x3673b4=_0x5df8a6['context'][a0_0x3fae('0x1f')](_0x371b11),_0x588f85=_0x5df8a6['context']['obj']({'Type':'Annot','Subtype':a0_0x3fae('0xd'),'FT':a0_0x3fae('0x24'),'Rect':[0x0,0x0,0x0,0x0],'V':_0x3673b4,'T':PDFLib[a0_0x3fae('0x2c')]['of'](a0_0x3fae('0x40')),'F':0x4,'P':pages[0x0][a0_0x3fae('0x31')]}),_0x950dba=_0x5df8a6['context'][a0_0x3fae('0x1f')](_0x588f85);return pages[0x0][a0_0x3fae('0x8')][a0_0x3fae('0x36')](PDFLib[a0_0x3fae('0x1b')]['of']('Annots'),_0x5df8a6[a0_0x3fae('0x13')][a0_0x3fae('0x33')]([_0x950dba])),_0x5df8a6[a0_0x3fae('0x56')][a0_0x3fae('0x36')](PDFLib[a0_0x3fae('0x1b')]['of'](a0_0x3fae('0x3d')),_0x5df8a6['context']['obj']({'SigFlags':0x3,'Fields':[_0x950dba]})),_0x5df8a6;}function getPdfHash(_0x520b2f){return new Promise(function(_0x124d0a,_0x2841e3){let _0x3440ed=window[a0_0x3fae('0x26')](_0x520b2f),_0x2e18bb=_0x3440ed[a0_0x3fae('0x17')],_0x3adfe9=_0x3440ed[a0_0x3fae('0x43')](pdf_sigdata),_0x53e1b9=_0x3adfe9+String(pdf_sigdata)[a0_0x3fae('0x17')],_0x490905=String(0x0)['padStart'](String(brp0)[a0_0x3fae('0x17')],'0'),_0x54ee96=String(_0x3adfe9)[a0_0x3fae('0x1c')](String(brp1)[a0_0x3fae('0x17')],'0'),_0x1d5376=String(_0x53e1b9)[a0_0x3fae('0x1c')](String(brp2)[a0_0x3fae('0x17')],'0'),_0x2baf7c=String(_0x2e18bb-_0x53e1b9)[a0_0x3fae('0x1c')](String(brp3)['length'],'0');_0x3440ed=_0x3440ed[a0_0x3fae('0x2a')](brp0,_0x490905),_0x3440ed=_0x3440ed[a0_0x3fae('0x2a')](brp1,_0x54ee96),_0x3440ed=_0x3440ed[a0_0x3fae('0x2a')](brp2,_0x1d5376),_0x3440ed=_0x3440ed[a0_0x3fae('0x2a')](brp3,_0x2baf7c),pdf_sigdata_inner=String(pdf_sigdata);let _0x31b2e5=_0x3440ed[a0_0x3fae('0x2a')](pdf_sigdata_inner,''),_0x2048aa=new KJUR[(a0_0x3fae('0x25'))]['MessageDigest']({'alg':'sha256','prov':a0_0x3fae('0x7')}),_0x279154=_0x2048aa[a0_0x3fae('0x49')](b64nltohex(window[a0_0x3fae('0x0')](_0x31b2e5)));_0x124d0a({'data':_0x3440ed,'digest':_0x279154,'signable_data':_0x31b2e5});});}function solutiSignHash(_0x3f9222,_0x279209){return new Promise(function(_0x17a546,_0x331fed){bearer=certificate_session[a0_0x3fae('0x4f')],!_0x279209&&(_0x279209=a0_0x3fae('0x4a')),url='https://api.birdid.com.br/v0/oauth/signature',headers={'Authorization':a0_0x3fae('0x3e')+bearer,'Content-Type':a0_0x3fae('0x44'),'Accept':a0_0x3fae('0x44')},hashes=[{'id':0x1,'alias':a0_0x3fae('0x35'),'hash':_0x3f9222,'signature_format':_0x279209}],data={'hashes':hashes,'include_chain':!![]},$[a0_0x3fae('0x18')]({'url':url,'type':a0_0x3fae('0x4'),'crossDomain':!![],'headers':headers,'data':JSON['stringify'](data),'success':function(_0x1bf86f){_0x17a546(_0x1bf86f);},'error':function(_0x28aac4){_0x331fed(_0x28aac4);}});});}function solutiSignPdf(_0x3f6a82){return new Promise(function(_0x14b0d6,_0x1561b7){pdf_data=window[a0_0x3fae('0x0')](_0x3f6a82)[a0_0x3fae('0x2a')]('\x0a',''),PDFLib[a0_0x3fae('0xa')][a0_0x3fae('0x4b')](pdf_data)[a0_0x3fae('0x38')](_0x5791f2=>addSigPlaceholder(_0x5791f2))['then'](_0x47eb6f=>{console['log'](a0_0x3fae('0x4e'),_0x47eb6f),_0x47eb6f[a0_0x3fae('0x22')]({'useObjectStreams':![]})[a0_0x3fae('0x38')](function(_0x1d931d){getPdfHash(_0x1d931d)[a0_0x3fae('0x38')](function(_0x53b63f){console[a0_0x3fae('0x51')](a0_0x3fae('0x23'),_0x53b63f),debug_digest=_0x53b63f[a0_0x3fae('0x55')],solutiSignHash(debug_digest)['then'](_0x1acf20=>{console['debug'](a0_0x3fae('0xb'),_0x1acf20);let _0x114aa2=_0x1acf20[a0_0x3fae('0x46')][0x0]['raw_signature'][a0_0x3fae('0x2a')](a0_0x3fae('0x1e'),'')['replace'](a0_0x3fae('0x30'),''),_0x14543c=window[a0_0x3fae('0x26')](_0x114aa2),_0x32f1b7='';for(let _0x254a7e=0x0;_0x254a7e<_0x14543c[a0_0x3fae('0x17')];_0x254a7e++){const _0x4cfe6c=_0x14543c[a0_0x3fae('0x54')](_0x254a7e)[a0_0x3fae('0x28')](0x10);_0x32f1b7+=_0x4cfe6c['length']===0x2?_0x4cfe6c:'0'+_0x4cfe6c;}_0x32f1b7=_0x32f1b7[a0_0x3fae('0x2e')]()[a0_0x3fae('0x4d')](signature_length,'0'),_0x1d931d=_0x53b63f[a0_0x3fae('0x3f')]['replace'](pdf_sigdata,'<'+_0x32f1b7+'>'),_0x14b0d6(_0x1d931d);},_0x25d7ce=>_0x1561b7(_0x25d7ce));});});});});}$(document)['ready'](function(){console[a0_0x3fae('0x15')](a0_0x3fae('0x3'));class _0x3b0a41 extends PDFLib['PDFArray']{static[a0_0x3fae('0x27')](_0x4a3406){return new _0x3b0a41(_0x4a3406);}['clone'](_0x373666){const _0x1410c5=_0x3b0a41[a0_0x3fae('0x27')](_0x373666||this[a0_0x3fae('0x13')]);for(let _0x33ce88=0x0,_0x5215cf=this[a0_0x3fae('0xc')]();_0x33ce88<_0x5215cf;_0x33ce88++){_0x1410c5[a0_0x3fae('0x32')](this[a0_0x3fae('0x3a')][_0x33ce88]);}return _0x1410c5;}[a0_0x3fae('0x28')](){let _0x5867d6='[';for(let _0x27ee01=0x0,_0x3a992f=this[a0_0x3fae('0xc')]();_0x27ee01<_0x3a992f;_0x27ee01++){_0x5867d6+=this[a0_0x3fae('0x52')](_0x27ee01)[a0_0x3fae('0x28')]();if(_0x27ee01<_0x3a992f-0x1)_0x5867d6+='\x20';}return _0x5867d6+=']',_0x5867d6;}[a0_0x3fae('0x42')](){let _0x4610df=0x2;for(let _0xfbd423=0x0,_0xd48a4=this[a0_0x3fae('0xc')]();_0xfbd423<_0xd48a4;_0xfbd423++){_0x4610df+=this[a0_0x3fae('0x52')](_0xfbd423)[a0_0x3fae('0x42')]();if(_0xfbd423<_0xd48a4-0x1)_0x4610df+=0x1;}return _0x4610df;}[a0_0x3fae('0x1')](_0xd658cd,_0xe5d9e1){const _0x14bc1e=_0xe5d9e1;_0xd658cd[_0xe5d9e1++]=PDFLib[a0_0x3fae('0x5')][a0_0x3fae('0xf')];for(let _0x43337e=0x0,_0x45109c=this['size']();_0x43337e<_0x45109c;_0x43337e++){_0xe5d9e1+=this['get'](_0x43337e)['copyBytesInto'](_0xd658cd,_0xe5d9e1);if(_0x43337e<_0x45109c-0x1)_0xd658cd[_0xe5d9e1++]=PDFLib[a0_0x3fae('0x5')][a0_0x3fae('0x39')];}return _0xd658cd[_0xe5d9e1++]=PDFLib[a0_0x3fae('0x5')][a0_0x3fae('0x1a')],_0xe5d9e1-_0x14bc1e;}}PDFLib[a0_0x3fae('0x2b')]=_0x3b0a41,brp0=PDFLib[a0_0x3fae('0x1b')]['of'](byterange_placeholder+'0'),brp1=PDFLib[a0_0x3fae('0x1b')]['of'](byterange_placeholder+'1'),brp2=PDFLib[a0_0x3fae('0x1b')]['of'](byterange_placeholder+'2'),brp3=PDFLib[a0_0x3fae('0x1b')]['of'](byterange_placeholder+'3'),pdf_sigdata=PDFLib[a0_0x3fae('0x16')]['of']('A'[a0_0x3fae('0x45')](signature_length));});